import{y as S,k as u,I as m,s,p as e,Q as c,J as U,K as A,N as I,$ as k,a5 as B,n as i,L as R,M as C,O as p,X as q,U as g,W as w,a0 as F,a7 as T,a3 as _,r,q as D}from"./index-05LJQMJY.js";import{C as M}from"./ClosePopup-Duyg3pN8.js";import{u as P}from"./use-quasar-DT7WokEl.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"q-pa-md"},O={class:"flex justify-between items-center q-mb-md"},j={class:"row q-col-gutter-md"},J={class:"text-h6 text-primary"},K={class:"text-caption text-grey"},W={class:"text-body2 q-mt-sm"},X={class:"text-body2 q-mt-xs ellipsis-3-lines"},G={key:0,class:"text-center q-my-xl text-grey"},H={key:1,class:"text-center q-my-xl"},Y={class:"text-h6 text-primary"},Z={__name:"RoomPage",setup(ee){const n=P(),x=r([]),v=r(!1),b=r(!1),d=r(!1),y=r(!1),f=r(null),t=r({room_name:"",room_no:"",capacity:null,details:""}),V=async()=>{v.value=!0;try{const l=await _.get("/admin/api/get-training-room");x.value=l.data.rooms||[]}catch(l){console.error("Error fetching rooms:",l),n.notify({type:"negative",message:"Failed to load training rooms"})}finally{v.value=!1}},Q=()=>{y.value=!1,f.value=null,t.value={room_name:"",room_no:"",capacity:null,details:""},d.value=!0},N=l=>{y.value=!0,f.value=l._id,t.value={...l},d.value=!0},h=async()=>{b.value=!0;try{y.value&&f.value?(await _.put(`/admin/api/training-room/${f.value}`,t.value),n.notify({type:"positive",message:"Training room updated successfully!"})):(await _.post("/admin/api/submit-training-room",t.value),n.notify({type:"positive",message:"Training room added successfully!"})),d.value=!1,V()}catch(l){console.error("Save room failed:",l),n.notify({type:"negative",message:"Failed to save room"})}finally{b.value=!1}},$=async l=>{n.dialog({title:"Confirm Delete",message:`Are you sure you want to delete "${l.room_name}"?`,cancel:!0,persistent:!0}).onOk(async()=>{try{await _.delete(`/admin/api/training-room/${l._id}`),n.notify({type:"positive",message:"Room deleted successfully!"}),V()}catch(a){console.error("Delete room failed:",a),n.notify({type:"negative",message:"Failed to delete room"})}})};return S(V),(l,a)=>(u(),m("div",L,[s("div",O,[a[5]||(a[5]=s("div",{class:"text-h6 text-primary"},"Training Rooms",-1)),e(c,{color:"primary",icon:"add",label:"Add Room",onClick:Q})]),s("div",j,[(u(!0),m(U,null,A(x.value,o=>(u(),m("div",{key:o._id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(R,{class:"shadow-3 rounded-borders hover-card"},{default:i(()=>[e(C,null,{default:i(()=>[s("div",J,p(o.room_name),1),s("div",K,"Room No: "+p(o.room_no),1),s("div",W,[a[6]||(a[6]=s("b",null,"Capacity:",-1)),D(" "+p(o.capacity||"-"),1)]),s("div",X,[a[7]||(a[7]=s("b",null,"Details:",-1)),D(" "+p(o.details||"No details provided."),1)])]),_:2},1024),e(q),e(w,{align:"around"},{default:i(()=>[e(c,{flat:"",dense:"",color:"primary",icon:"edit",label:"Edit",onClick:E=>N(o)},null,8,["onClick"]),e(c,{flat:"",dense:"",color:"negative",icon:"delete",label:"Delete",onClick:E=>$(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),!x.value.length&&!v.value?(u(),m("div",G,[e(I,{name:"meeting_room",size:"40px",color:"grey-6"}),a[8]||(a[8]=s("div",{class:"text-subtitle2 q-mt-sm"},"No training rooms found.",-1))])):k("",!0),v.value?(u(),m("div",H,[e(B,{color:"primary",size:"40px"})])):k("",!0),e(T,{modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=o=>d.value=o),persistent:""},{default:i(()=>[e(R,{style:{"min-width":"500px"},class:"q-pa-md"},{default:i(()=>[e(C,null,{default:i(()=>[s("div",Y,p(y.value?"Edit Room":"Add Room"),1)]),_:1}),e(q),e(C,{class:"q-gutter-md"},{default:i(()=>[e(g,{modelValue:t.value.room_name,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.room_name=o),label:"Room Name",outlined:""},null,8,["modelValue"]),e(g,{modelValue:t.value.room_no,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.room_no=o),label:"Room No",outlined:""},null,8,["modelValue"]),e(g,{modelValue:t.value.capacity,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.capacity=o),modelModifiers:{number:!0},label:"Capacity",type:"number",outlined:""},null,8,["modelValue"]),e(g,{modelValue:t.value.details,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.details=o),label:"Details",outlined:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(w,{align:"right"},{default:i(()=>[F(e(c,{flat:"",label:"Cancel",color:"negative"},null,512),[[M]]),e(c,{label:"Save",color:"primary",onClick:h,loading:b.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},se=z(Z,[["__scopeId","data-v-3ddf3427"]]);export{se as default};
