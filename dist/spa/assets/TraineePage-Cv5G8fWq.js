import{J as x,k as P,W as k,p as l,Q as m,n as r,a5 as s,$ as E,Z as g,_ as v,s as w,a8 as _,aj as $,ad as y,ai as Q,q as B,a7 as F,ag as b,r as i}from"./index-Bzn0LiPU.js";import{Q as M}from"./QTable-C7Me2Ftf.js";import{Q as A}from"./QSelect-ChM7-dt3.js";import{Q as j}from"./QForm-FpFFQh9P.js";import{C as D}from"./ClosePopup-C6H1DDOC.js";import"./QList-BSRIgFgv.js";import"./QLinearProgress-DAd5lNjJ.js";import"./use-fullscreen-2nc3m1XY.js";import"./QChip-COUtrNlO.js";import"./QItemSection-COOhA9zR.js";import"./QItemLabel-BQHMT6Ru.js";import"./QMenu-2e4m313B.js";import"./position-engine-BCFNfW53.js";import"./selection-DFkNIa7B.js";import"./rtl-DFPa-2ov.js";import"./format-DyQxkAtJ.js";const I={class:"q-pa-md"},R={class:"row justify-end q-gutter-sm"},re={__name:"TraineePage",setup(h){const p=i([]),n=i(!1),f=i(!1),c=i(""),V=i([]),o=i({full_name:"",email:"",password:"",mobile:"",department:"",district:"",roles:["68b01472d1838d6cd773d6fa"]}),d=i({page:1,rowsPerPage:10,rowsNumber:0}),U=[{name:"full_name",label:"Name",field:"full_name",sortable:!0},{name:"email",label:"Email",field:"email"},{name:"mobile",label:"Mobile",field:"mobile"},{name:"department",label:"Department",field:"department"}],q=async()=>{try{const{data:t}=await b.post("/admin-api/trainee",o.value);n.value=!1,C(),t?.trainee&&p.value.unshift(t.trainee),u()}catch(t){console.error("Submit trainee failed:",t)}};function C(){o.value={full_name:"",email:"",password:"",mobile:"",department:"",district:["68a58be10e14dc50904566a3"],roles:["68b01472d1838d6cd773d6fa"]}}async function N(){try{const t=await b.get("/admin-api/get-all-district");V.value=t.data.districts||[]}catch(t){console.error("Error fetching districts:",t)}}async function u(){f.value=!0;try{const{page:t,rowsPerPage:e}=d.value,a=await b.get(`/admin-api/trainees?search=${c.value}&page=${t}&limit=${e}`);p.value=a.data.trainees||[],d.value.rowsNumber=a.data.pagination?.total||0}catch(t){console.error("Error fetching trainees",t)}finally{f.value=!1}}function S(t){d.value=t.pagination,u()}function T(){d.value.page=1,u()}return x(()=>{u(),N()}),(t,e)=>(P(),k("div",I,[l(m,{color:"primary",icon:"add",label:"Add Trainee",onClick:e[0]||(e[0]=a=>n.value=!0),class:"q-mb-md"}),l(M,{class:"styled-table shadow-2 rounded-borders",flat:"",bordered:"",title:"Trainees",rows:p.value,columns:U,"row-key":"id",loading:f.value,onRequest:S},{"top-right":r(()=>[l(s,{dense:"",debounce:"300",modelValue:c.value,"onUpdate:modelValue":[e[1]||(e[1]=a=>c.value=a),T],placeholder:"Search...",outlined:"",clearable:""},{append:r(()=>[l(E,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","loading"]),l(Q,{modelValue:n.value,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value=a),persistent:""},{default:r(()=>[l(g,{style:{"min-width":"500px"},class:"q-pa-md"},{default:r(()=>[l(v,null,{default:r(()=>[...e[10]||(e[10]=[w("div",{class:"text-h6 text-primary"},"Add New Trainee",-1)])]),_:1}),l(_),l(v,null,{default:r(()=>[l(j,{onSubmit:$(q,["prevent"]),class:"q-gutter-md"},{default:r(()=>[l(s,{modelValue:o.value.full_name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.full_name=a),label:"Full Name",outlined:""},null,8,["modelValue"]),l(s,{modelValue:o.value.email,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.email=a),label:"Email",outlined:"",type:"email"},null,8,["modelValue"]),l(s,{modelValue:o.value.password,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.password=a),label:"Password",outlined:"",type:"password"},null,8,["modelValue"]),l(s,{modelValue:o.value.mobile,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.mobile=a),label:"Mobile",outlined:""},null,8,["modelValue"]),l(s,{modelValue:o.value.department,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.department=a),label:"Department",outlined:""},null,8,["modelValue"]),l(A,{modelValue:o.value.district,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.district=a),options:V.value.map(a=>({label:a.name,value:a._id})),label:"District",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"]),w("div",R,[y(l(m,{flat:"",label:"Cancel",color:"negative"},null,512),[[D]]),l(m,{type:"submit",label:"Save",color:"primary"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Q,{modelValue:t.successDialog,"onUpdate:modelValue":e[9]||(e[9]=a=>t.successDialog=a)},{default:r(()=>[l(g,null,{default:r(()=>[l(v,{class:"text-green text-center"},{default:r(()=>[...e[11]||(e[11]=[B(" âœ… Trainee created successfully! ",-1)])]),_:1}),l(F,{align:"center"},{default:r(()=>[y(l(m,{flat:"",label:"OK",color:"primary"},null,512),[[D]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{re as default};
