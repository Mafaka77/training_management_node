import{g as y,y as g,k as n,m as c,n as i,p as o,L as _,s,a6 as b,U as u,T as q,I as V,N as d,Q,r as m}from"./index-BFQVnkeD.js";import{Q as w}from"./QFile-CdRBH3kx.js";import{Q as h}from"./QForm-BT1M9ZeC.js";import{Q as k}from"./QPage-BDM8aFPj.js";import"./QChip-DfQm8PkW.js";import"./use-file-BANHZiJZ.js";import"./format-DyQxkAtJ.js";const P={class:"col-8"},U={class:"col-4 flex flex-center column"},C=["src"],F={class:"col-12 flex justify-end q-mt-lg"},j={__name:"ProfilePage",setup(B){const{proxy:f}=y(),p=f.$api,a=m({expertise:"",qualification:"",experience:"",profile_picture:null}),r=m("");g(async()=>{try{const{data:l}=await p.get("/admin/trainer/proficiency");l.forEach(t=>{t.key in a.value&&(a.value[t.key]=t.type==="file"?null:t.value||"")});const e=l.find(t=>t.key==="profile_picture");e&&e.value&&typeof e.value=="string"&&(r.value="https://staging2.egovmz.in"+e.value)}catch(l){console.error("Failed to load fields:",l)}});function v(l){r.value=l?URL.createObjectURL(l):""}async function x(){const l=new FormData;l.append("expertise",a.value.expertise||""),l.append("qualification",a.value.qualification||""),l.append("experience",a.value.experience||""),a.value.profile_picture&&l.append("profile_picture",a.value.profile_picture);try{const{data:e}=await p.put("/admin/trainer/proficiency",l,{headers:{"Content-Type":"multipart/form-data"}});console.log("Profile updated successfully!",e)}catch(e){console.error("Save failed:",e)}}return(l,e)=>(n(),c(k,{class:"q-pa-md flex flex-center bg-grey-2"},{default:i(()=>[o(_,{class:"q-pa-lg shadow-2 rounded-borders",style:{"max-width":"800px",width:"100%"}},{default:i(()=>[e[4]||(e[4]=s("div",{class:"text-h5 text-primary text-weight-bold q-mb-lg"}," Trainer Profile ",-1)),o(h,{onSubmit:b(x,["prevent"]),class:"row q-col-gutter-md"},{default:i(()=>[s("div",P,[o(u,{modelValue:a.value.expertise,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.expertise=t),label:"Expertise",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:a.value.qualification,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.qualification=t),label:"Qualification",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:a.value.experience,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.experience=t),label:"Experience",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])]),s("div",U,[o(q,{size:"120px",class:"q-mb-md"},{default:i(()=>[r.value?(n(),V("img",{key:0,src:r.value,alt:"Profile"},null,8,C)):(n(),c(d,{key:1,name:"person",size:"80px",color:"grey-6"}))]),_:1}),o(w,{modelValue:a.value.profile_picture,"onUpdate:modelValue":[e[3]||(e[3]=t=>a.value.profile_picture=t),v],label:"Choose Picture",accept:"image/*",outlined:"",dense:"",clearable:""},{append:i(()=>[o(d,{name:"photo_camera",class:"cursor-pointer"})]),_:1},8,["modelValue"])]),s("div",F,[o(Q,{type:"submit",color:"primary",unelevated:"",icon:"save",label:"Save Changes"})])]),_:1})]),_:1})]),_:1}))}};export{j as default};
