import{J as V,k as d,W as c,s as l,p as e,Q as u,X as q,Y as N,$ as A,ac as E,n as s,Z as _,_ as p,a0 as y,a8 as C,a5 as S,a7 as x,ad as B,ai as F,ag as h,r as m}from"./index-Bzn0LiPU.js";import{C as I}from"./ClosePopup-C6H1DDOC.js";import{u as $}from"./use-quasar-CLO-DOJZ.js";const L={class:"q-pa-md"},P={class:"row items-center justify-between q-mb-md"},U={class:"row q-col-gutter-md"},j={class:"text-h6 text-primary text-weight-medium ellipsis"},z={class:"text-caption text-grey"},J={key:0,class:"text-center q-mt-xl text-grey"},M={class:"text-h6 text-primary"},G={__name:"CategoryPage",setup(T){const w=$(),g=m([]),r=m(!1),n=m(!1),i=m({_id:null,name:""}),v=async()=>{try{const t=await h.get("/admin-api/get-training-category");g.value=t.data?.categories||[]}catch(t){console.error("Failed to fetch categories:",t)}},b=async()=>{try{const t=[{key:"name",value:i.value.name,type:"text",enabled:!0}];await h.post("/admin-api/submit-training-category",t),w.notify({type:"positive",message:n.value?"Category updated successfully":"Category added successfully",position:"top-right"}),r.value=!1,v(),f()}catch(t){console.error("Failed to save category:",t)}},k=()=>{f(),n.value=!1,r.value=!0},Q=t=>{i.value={_id:t._id,name:t.name},n.value=!0,r.value=!0},f=()=>{i.value={_id:null,name:""}},D=t=>t?new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"â€”";return V(v),(t,a)=>(d(),c("div",L,[l("div",P,[a[2]||(a[2]=l("div",{class:"text-h5 text-primary text-weight-bold"},"Training Categories",-1)),e(u,{color:"primary",label:"Add Category",icon:"add",onClick:k})]),l("div",U,[(d(!0),c(q,null,N(g.value,o=>(d(),c("div",{key:o._id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(_,{class:"category-card shadow-3 rounded-borders"},{default:s(()=>[e(p,{class:"text-center"},{default:s(()=>[l("div",j,y(o.name),1),l("div",z," Created: "+y(D(o.createdAt)),1)]),_:2},1024),e(C),e(x,{align:"center"},{default:s(()=>[e(u,{dense:"",flat:"",color:"primary",icon:"edit",label:"Edit",onClick:W=>Q(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),g.value.length?E("",!0):(d(),c("div",J,[e(A,{name:"category",size:"56px",color:"grey-5"}),a[3]||(a[3]=l("div",{class:"text-subtitle1 q-mt-sm"},"No categories found",-1))])),e(F,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),persistent:""},{default:s(()=>[e(_,{style:{"min-width":"400px"},class:"q-pa-md"},{default:s(()=>[e(p,null,{default:s(()=>[l("div",M,y(n.value?"Edit Category":"Add Category"),1)]),_:1}),e(C),e(p,{class:"q-gutter-md"},{default:s(()=>[e(S,{modelValue:i.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>i.value.name=o),label:"Category Name",outlined:""},null,8,["modelValue"])]),_:1}),e(x,{align:"right"},{default:s(()=>[B(e(u,{flat:"",label:"Cancel",color:"negative"},null,512),[[I]]),e(u,{label:"Save",color:"primary",onClick:b})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{G as default};
