import{y as x,k as P,I as k,p as l,Q as m,n as r,U as i,N as E,L as g,M as v,s as w,X as M,a6 as B,a0 as y,a7 as Q,q as F,W as _,a3 as b,r as s}from"./index-CMgzUS9v.js";import{Q as $}from"./QTable-Dy7GxnyQ.js";import{Q as A}from"./QSelect-DeYSNQiQ.js";import{Q as I}from"./QForm-DscbyIf6.js";import{C as U}from"./ClosePopup-DOU4H43s.js";import"./QList-D9qRi99b.js";import"./QLinearProgress-AKLToXfD.js";import"./use-fullscreen-BW-SY7hF.js";import"./QChip-CbTa3AEX.js";import"./QItemSection-D_wl1sO6.js";import"./QItemLabel-DP0CILE5.js";import"./QMenu-rH5zCfQv.js";import"./position-engine-BHKhMHOg.js";import"./selection-BDZdaolN.js";import"./rtl-DFPa-2ov.js";import"./format-DyQxkAtJ.js";const R={class:"q-pa-md"},h={class:"row justify-end q-gutter-sm"},re={__name:"TraineePage",setup(j){const p=s([]),n=s(!1),f=s(!1),c=s(""),V=s([]),o=s({full_name:"",email:"",password:"",mobile:"",department:"",district:"",roles:["68b01472d1838d6cd773d6fa"]}),d=s({page:1,rowsPerPage:10,rowsNumber:0}),D=[{name:"full_name",label:"Name",field:"full_name",sortable:!0},{name:"email",label:"Email",field:"email"},{name:"mobile",label:"Mobile",field:"mobile"},{name:"department",label:"Department",field:"department"}],N=async()=>{try{const{data:t}=await b.post("/admin/trainee",o.value);n.value=!1,q(),t?.trainee&&p.value.unshift(t.trainee),u()}catch(t){console.error("Submit trainee failed:",t)}};function q(){o.value={full_name:"",email:"",password:"",mobile:"",department:"",district:["68a58be10e14dc50904566a3"],roles:["68b01472d1838d6cd773d6fa"]}}async function C(){try{const t=await b.get("/admin/get-all-district");V.value=t.data.districts||[]}catch(t){console.error("Error fetching districts:",t)}}async function u(){f.value=!0;try{const{page:t,rowsPerPage:e}=d.value,a=await b.get(`/admin/trainees?search=${c.value}&page=${t}&limit=${e}`);p.value=a.data.trainees||[],d.value.rowsNumber=a.data.pagination?.total||0}catch(t){console.error("Error fetching trainees",t)}finally{f.value=!1}}function S(t){d.value=t.pagination,u()}function T(){d.value.page=1,u()}return x(()=>{u(),C()}),(t,e)=>(P(),k("div",R,[l(m,{color:"primary",icon:"add",label:"Add Trainee",onClick:e[0]||(e[0]=a=>n.value=!0),class:"q-mb-md"}),l($,{class:"styled-table shadow-2 rounded-borders",flat:"",bordered:"",title:"Trainees",rows:p.value,columns:D,"row-key":"id",loading:f.value,onRequest:S},{"top-right":r(()=>[l(i,{dense:"",debounce:"300",modelValue:c.value,"onUpdate:modelValue":[e[1]||(e[1]=a=>c.value=a),T],placeholder:"Search...",outlined:"",clearable:""},{append:r(()=>[l(E,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","loading"]),l(Q,{modelValue:n.value,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value=a),persistent:""},{default:r(()=>[l(g,{style:{"min-width":"500px"},class:"q-pa-md"},{default:r(()=>[l(v,null,{default:r(()=>[...e[10]||(e[10]=[w("div",{class:"text-h6 text-primary"},"Add New Trainee",-1)])]),_:1}),l(M),l(v,null,{default:r(()=>[l(I,{onSubmit:B(N,["prevent"]),class:"q-gutter-md"},{default:r(()=>[l(i,{modelValue:o.value.full_name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.full_name=a),label:"Full Name",outlined:""},null,8,["modelValue"]),l(i,{modelValue:o.value.email,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.email=a),label:"Email",outlined:"",type:"email"},null,8,["modelValue"]),l(i,{modelValue:o.value.password,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.password=a),label:"Password",outlined:"",type:"password"},null,8,["modelValue"]),l(i,{modelValue:o.value.mobile,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.mobile=a),label:"Mobile",outlined:""},null,8,["modelValue"]),l(i,{modelValue:o.value.department,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.department=a),label:"Department",outlined:""},null,8,["modelValue"]),l(A,{modelValue:o.value.district,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.district=a),options:V.value.map(a=>({label:a.name,value:a._id})),label:"District",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"]),w("div",h,[y(l(m,{flat:"",label:"Cancel",color:"negative"},null,512),[[U]]),l(m,{type:"submit",label:"Save",color:"primary"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Q,{modelValue:t.successDialog,"onUpdate:modelValue":e[9]||(e[9]=a=>t.successDialog=a)},{default:r(()=>[l(g,null,{default:r(()=>[l(v,{class:"text-green text-center"},{default:r(()=>[...e[11]||(e[11]=[F(" âœ… Trainee created successfully! ",-1)])]),_:1}),l(_,{align:"center"},{default:r(()=>[y(l(m,{flat:"",label:"OK",color:"primary"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{re as default};
