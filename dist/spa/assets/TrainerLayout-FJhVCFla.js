import{R as B,S as R,r as k,Z as b,y as F,j as K,k as l,m as n,n as a,p as e,Q as V,N as d,q as s,U as O,_ as H,O as y,$ as C,I as w,J as j,K as E,X as x,a0 as f,a1 as c,a2 as J,T as M,P as _,a3 as P,a4 as X}from"./index-BFQVnkeD.js";import{Q as Z,a as $,b as G,c as W,d as Y}from"./QLayout-DgDOl7sd.js";import{Q as ee}from"./QSpace-CsGAL2gM.js";import{Q as ae}from"./QBadge-CPcei1qS.js";import{Q as i,a as o}from"./QItemSection-DwMX_uwU.js";import{Q as h}from"./QList-DRW5wzJ9.js";import{Q as D}from"./QMenu-_RHIY6Py.js";import{Q as L}from"./QItemLabel-CE04gojx.js";import{Q as te}from"./QDrawer-BulMUwSg.js";import"./QResizeObserver-DlyEYM1y.js";import"./position-engine-C7g5UB-x.js";import"./selection-Bt0zPBy8.js";import"./touch-BjYP5sR0.js";import"./format-DyQxkAtJ.js";const le=["src"],oe=["src"],Qe={__name:"TrainerLayout",setup(re){const S=B(),m=R(),v=k(!1),g=k(""),p=k([]),Q=k(b.isActive),I=()=>{v.value=!v.value},T=async()=>{if(g.value)try{const r=await P.get("/trainer/search",{params:{q:g.value}});console.log("Search Results:",r.data),S.push({path:"/trainer/search",query:{q:g.value}})}catch(r){console.error("Search error:",r)}},N=async()=>{try{const r=await P.get("/trainer/notifications");p.value=r.data||[]}catch(r){console.error("Failed to load notifications:",r)}},q=()=>{p.value=[]},A=r=>{b.set(r),localStorage.setItem("darkMode",r?"1":"0")};F(()=>{const r=localStorage.getItem("darkMode");if(r){const t=r==="1";Q.value=t,b.set(t)}N()});const U=()=>{X.create({title:"Confirm Logout",message:"Are you sure you want to log out?",cancel:!0,persistent:!0}).onOk(()=>{m.logout(),S.push("/login")})};return(r,t)=>{const z=K("router-view");return l(),n(Y,{view:"hHh lpR fFf"},{default:a(()=>[e(Z,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[e($,null,{default:a(()=>[e(V,{dense:"",flat:"",round:"",icon:"menu",onClick:I}),e(G,null,{default:a(()=>[e(d,{name:"school",size:"32px",class:"q-mr-sm"}),t[3]||(t[3]=s(" Trainer Panel ",-1))]),_:1}),e(O,{dense:"",standout:"bg-white text-black",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=u=>g.value=u),placeholder:"Search...",class:"q-mx-md",onKeyup:H(T,["enter"])},{append:a(()=>[e(d,{name:"search",class:"cursor-pointer",onClick:T})]),_:1},8,["modelValue"]),e(ee),e(V,{dense:"",flat:"",round:"",icon:"notifications"},{default:a(()=>[p.value.length>0?(l(),n(ae,{key:0,color:"red",floating:""},{default:a(()=>[s(y(p.value.length),1)]),_:1})):C("",!0),e(D,null,{default:a(()=>[e(h,{style:{"min-width":"250px"}},{default:a(()=>[(l(!0),w(j,null,E(p.value,u=>(l(),n(i,{key:u.id,clickable:""},{default:a(()=>[e(o,null,{default:a(()=>[s(y(u.message),1)]),_:2},1024),e(o,{side:"",caption:""},{default:a(()=>[s(y(u.time),1)]),_:2},1024)]),_:2},1024))),128)),p.value.length===0?(l(),n(i,{key:0},{default:a(()=>[e(o,null,{default:a(()=>[...t[4]||(t[4]=[s("No new notifications",-1)])]),_:1})]),_:1})):C("",!0),e(x),f((l(),n(i,{clickable:"",onClick:q},{default:a(()=>[e(o,{class:"text-center text-negative"},{default:a(()=>[...t[5]||(t[5]=[s(" Clear All ",-1)])]),_:1})]),_:1})),[[c]])]),_:1})]),_:1})]),_:1}),e(J,{modelValue:Q.value,"onUpdate:modelValue":[t[1]||(t[1]=u=>Q.value=u),A],"checked-icon":"dark_mode","unchecked-icon":"light_mode",color:"yellow","keep-color":""},null,8,["modelValue"]),e(M,{size:"32px",class:"cursor-pointer"},{default:a(()=>[_(m).profilePic?(l(),w("img",{key:0,src:_(m).profilePic,alt:"Trainer Avatar"},null,8,le)):(l(),n(d,{key:1,name:"account_circle",size:"28px"})),e(D,null,{default:a(()=>[e(h,{style:{"min-width":"150px"}},{default:a(()=>[f((l(),n(i,{clickable:"",to:"/trainer/profile"},{default:a(()=>[e(o,null,{default:a(()=>[...t[6]||(t[6]=[s("My Profile",-1)])]),_:1})]),_:1})),[[c]]),e(x),f((l(),n(i,{clickable:"",onClick:U},{default:a(()=>[e(o,{class:"text-negative"},{default:a(()=>[...t[7]||(t[7]=[s("Logout",-1)])]),_:1})]),_:1})),[[c]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(te,{"show-if-above":"",modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=u=>v.value=u),side:"left",bordered:""},{default:a(()=>[e(h,null,{default:a(()=>[e(i,null,{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(M,{size:"48px"},{default:a(()=>[_(m).profilePic?(l(),w("img",{key:0,src:_(m).profilePic,alt:"Trainer Avatar"},null,8,oe)):(l(),n(d,{key:1,name:"person",size:"md"}))]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(L,{class:"text-weight-medium"},{default:a(()=>[s(y(_(m).name),1)]),_:1}),e(L,{caption:"",class:"text-grey"},{default:a(()=>[...t[8]||(t[8]=[s("Trainer",-1)])]),_:1})]),_:1})]),_:1}),e(x,{spaced:""}),f((l(),n(i,{clickable:"",to:"/trainer/dashboard"},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(d,{name:"dashboard"})]),_:1}),e(o,null,{default:a(()=>[...t[9]||(t[9]=[s("My Dashboard",-1)])]),_:1})]),_:1})),[[c]]),f((l(),n(i,{clickable:"",to:"/trainer/trainings"},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(d,{name:"school"})]),_:1}),e(o,null,{default:a(()=>[...t[10]||(t[10]=[s("My Trainings",-1)])]),_:1})]),_:1})),[[c]]),f((l(),n(i,{clickable:"",to:"/trainer/proficiency"},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(d,{name:"star_rate"})]),_:1}),e(o,null,{default:a(()=>[...t[11]||(t[11]=[s("Proficiency",-1)])]),_:1})]),_:1})),[[c]]),f((l(),n(i,{clickable:"",to:"/trainer/materials"},{default:a(()=>[e(o,{avatar:""},{default:a(()=>[e(d,{name:"upload_file"})]),_:1}),e(o,null,{default:a(()=>[...t[12]||(t[12]=[s("Upload Materials",-1)])]),_:1})]),_:1})),[[c]])]),_:1})]),_:1},8,["modelValue"]),e(W,null,{default:a(()=>[e(z)]),_:1})]),_:1})}}};export{Qe as default};
