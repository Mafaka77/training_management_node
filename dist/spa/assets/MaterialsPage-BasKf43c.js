import{Q as u}from"./QSelect-ChM7-dt3.js";import{Q as c}from"./QUploader-DFCyTLID.js";import{J as d,k as m,m as f,n as _,p as r,Q,ag as p,r as l}from"./index-Bzn0LiPU.js";import{Q as g}from"./QPage-DWBr2NDD.js";import"./QChip-COUtrNlO.js";import"./QItemSection-COOhA9zR.js";import"./QItemLabel-BQHMT6Ru.js";import"./QMenu-2e4m313B.js";import"./position-engine-BCFNfW53.js";import"./selection-DFkNIa7B.js";import"./rtl-DFPa-2ov.js";import"./format-DyQxkAtJ.js";import"./use-file-C-vdhq8C.js";const P={__name:"MaterialsPage",setup(h){const s=l([]),t=l(null),i=async()=>{try{const a=await p.get("/admin-api/trainer/courses");s.value=a.data.data}catch(a){console.error(a)}},n=async()=>{if(!t.value)return alert("Select a course first");const a=l.uploader;if(!a.files.length)return alert("Select files to upload");const o=new FormData;a.files.forEach(e=>o.append("materials",e));try{await p.post(`/admin-api/trainer/course/${t.value}/materials`,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{console.log(`Upload progress: ${Math.round(e.loaded*100/e.total)}%`)}}),alert("Materials uploaded successfully!"),a.reset()}catch(e){console.error(e)}};return d(i),(a,o)=>(m(),f(g,{class:"q-pa-md"},{default:_(()=>[r(u,{filled:"",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),options:s.value,"option-label":"t_name","option-value":"_id",label:"Select Course",required:""},null,8,["modelValue","options"]),r(c,{ref:"uploader",label:"Upload Materials",multiple:"","auto-upload":!1,url:"",accept:".pdf,.doc,.docx,.ppt,.pptx","max-file-size":"10485760"},null,512),r(Q,{onClick:n,label:"Upload",color:"primary",class:"q-mt-md"})]),_:1}))}};export{P as default};
