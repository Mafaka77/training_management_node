import{Q as u}from"./QSelect-JXd70JCl.js";import{Q as c}from"./QUploader-BSmKnCuI.js";import{y as d,k as m,m as f,n as _,p as r,Q as y,a3 as p,r as l}from"./index-BFQVnkeD.js";import{Q}from"./QPage-BDM8aFPj.js";import"./QChip-DfQm8PkW.js";import"./QItemSection-DwMX_uwU.js";import"./QItemLabel-CE04gojx.js";import"./QMenu-_RHIY6Py.js";import"./position-engine-C7g5UB-x.js";import"./selection-Bt0zPBy8.js";import"./rtl-DFPa-2ov.js";import"./format-DyQxkAtJ.js";import"./use-file-BANHZiJZ.js";const P={__name:"MaterialsPage",setup(h){const s=l([]),t=l(null),i=async()=>{try{const a=await p.get("/admin-api/trainer/courses");s.value=a.data.data}catch(a){console.error(a)}},n=async()=>{if(!t.value)return alert("Select a course first");const a=l.uploader;if(!a.files.length)return alert("Select files to upload");const o=new FormData;a.files.forEach(e=>o.append("materials",e));try{await p.post(`/admin-api/trainer/course/${t.value}/materials`,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{console.log(`Upload progress: ${Math.round(e.loaded*100/e.total)}%`)}}),alert("Materials uploaded successfully!"),a.reset()}catch(e){console.error(e)}};return d(i),(a,o)=>(m(),f(Q,{class:"q-pa-md"},{default:_(()=>[r(u,{filled:"",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),options:s.value,"option-label":"t_name","option-value":"_id",label:"Select Course",required:""},null,8,["modelValue","options"]),r(c,{ref:"uploader",label:"Upload Materials",multiple:"","auto-upload":!1,url:"",accept:".pdf,.doc,.docx,.ppt,.pptx","max-file-size":"10485760"},null,512),r(y,{onClick:n,label:"Upload",color:"primary",class:"q-mt-md"})]),_:1}))}};export{P as default};
