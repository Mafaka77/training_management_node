import{y as V,k as d,I as c,s as l,p as e,Q as u,J as q,K as N,N as A,$ as E,n as s,L as _,M as y,O as p,X as C,U as S,W as x,a0 as B,a7 as F,a3 as h,r as m}from"./index-DC0YMQbz.js";import{C as I}from"./ClosePopup-kboo78GW.js";import{u as L}from"./use-quasar-CgNRhnzc.js";const U={class:"q-pa-md"},$={class:"row items-center justify-between q-mb-md"},M={class:"row q-col-gutter-md"},P={class:"text-h6 text-primary text-weight-medium ellipsis"},j={class:"text-caption text-grey"},z={key:0,class:"text-center q-mt-xl text-grey"},J={class:"text-h6 text-primary"},G={__name:"CategoryPage",setup(K){const w=L(),g=m([]),r=m(!1),i=m(!1),n=m({_id:null,name:""}),v=async()=>{try{const t=await h.get("/admin/get-training-category");g.value=t.data?.categories||[]}catch(t){console.error("Failed to fetch categories:",t)}},b=async()=>{try{const t=[{key:"name",value:n.value.name,type:"text",enabled:!0}];await h.post("/admin/submit-training-category",t),w.notify({type:"positive",message:i.value?"Category updated successfully":"Category added successfully",position:"top-right"}),r.value=!1,v(),f()}catch(t){console.error("Failed to save category:",t)}},k=()=>{f(),i.value=!1,r.value=!0},Q=t=>{n.value={_id:t._id,name:t.name},i.value=!0,r.value=!0},f=()=>{n.value={_id:null,name:""}},D=t=>t?new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"â€”";return V(v),(t,a)=>(d(),c("div",U,[l("div",$,[a[2]||(a[2]=l("div",{class:"text-h5 text-primary text-weight-bold"},"Training Categories",-1)),e(u,{color:"primary",label:"Add Category",icon:"add",onClick:k})]),l("div",M,[(d(!0),c(q,null,N(g.value,o=>(d(),c("div",{key:o._id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(_,{class:"category-card shadow-3 rounded-borders"},{default:s(()=>[e(y,{class:"text-center"},{default:s(()=>[l("div",P,p(o.name),1),l("div",j," Created: "+p(D(o.createdAt)),1)]),_:2},1024),e(C),e(x,{align:"center"},{default:s(()=>[e(u,{dense:"",flat:"",color:"primary",icon:"edit",label:"Edit",onClick:O=>Q(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),g.value.length?E("",!0):(d(),c("div",z,[e(A,{name:"category",size:"56px",color:"grey-5"}),a[3]||(a[3]=l("div",{class:"text-subtitle1 q-mt-sm"},"No categories found",-1))])),e(F,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),persistent:""},{default:s(()=>[e(_,{style:{"min-width":"400px"},class:"q-pa-md"},{default:s(()=>[e(y,null,{default:s(()=>[l("div",J,p(i.value?"Edit Category":"Add Category"),1)]),_:1}),e(C),e(y,{class:"q-gutter-md"},{default:s(()=>[e(S,{modelValue:n.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>n.value.name=o),label:"Category Name",outlined:""},null,8,["modelValue"])]),_:1}),e(x,{align:"right"},{default:s(()=>[B(e(u,{flat:"",label:"Cancel",color:"negative"},null,512),[[I]]),e(u,{label:"Save",color:"primary",onClick:b})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{G as default};
