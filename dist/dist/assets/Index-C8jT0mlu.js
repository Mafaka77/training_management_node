import{x as R,s as S,E as P,m as E,o as s,c as n,a as e,b as w,w as f,j as u,k,F as g,r as x,n as p,u as a,t as d,z as F,A as G,L as I,g as V,p as T,i as O}from"./index-BKnsya-o.js";import{d as q}from"./index-C8G2vthF.js";import{u as J}from"./trainingStore-BGEFs4yX.js";import"./_commonjsHelpers-Cpj98o6Y.js";const K={class:"space-y-6 max-w-6xl mx-auto"},Q={class:"flex flex-col gap-6 mb-4"},W={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},X={key:0},Y={class:"space-y-4"},Z={class:"flex flex-wrap items-center gap-2"},ee=["onClick"],te={class:"relative max-w-md"},re={class:"relative min-h-[400px]"},oe={key:0,class:"grid grid-cols-1 gap-4"},se={key:1,class:"flex flex-col items-center justify-center py-20 bg-zinc-50 dark:bg-white/5 rounded-3xl border-2 border-dashed border-zinc-200 dark:border-white/10"},ne={key:2,class:"grid grid-cols-1 gap-4"},ae={class:"relative shrink-0"},de=["src"],ie={class:"flex-1 min-w-0"},le={class:"flex items-center gap-3 mb-2"},ce={class:"text-lg font-bold text-zinc-900 dark:text-zinc-100 truncate"},be={class:"flex flex-wrap items-center gap-y-2 gap-x-4 mb-4 text-sm text-zinc-500 dark:text-zinc-400"},ue={class:"flex items-center gap-1.5 font-medium"},ge={key:0,class:"flex items-center gap-1.5 font-medium"},xe={class:"flex items-center gap-1.5 font-medium"},me={class:"flex flex-wrap gap-2"},he={class:"mt-4 pt-4 border-t border-zinc-100 dark:border-white/5 flex flex-wrap items-center justify-between gap-4"},ke={key:0,class:"flex md:flex-col gap-2 pt-4 md:pt-0 border-t md:border-t-0 border-zinc-100 dark:border-white/5"},pe=["onClick"],ve={key:0,class:"flex justify-end pt-8"},we={class:"flex items-center gap-2"},fe=["disabled"],ze=["onClick"],_e=["disabled"],Ve={__name:"Index",setup(ye){const z=R(),{user:Ce}=S(z),l=J(),{programs:_,page:b,totalPages:m,search:h,status:y,isLoading:C}=S(l),D="https://staging2.egovmz.in";function A(o){return o?`${D}${o}`:"https://via.placeholder.com/400x400?text=No+Banner"}const M={Draft:{color:"bg-amber-500",badge:"bg-amber-50 dark:bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-100 dark:border-amber-500/20"},Upcoming:{color:"bg-red-400",badge:"bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400 border-red-100 dark:border-amber-500/20"},Ongoing:{color:"bg-blue-500",badge:"bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-500/20"},Completed:{color:"bg-emerald-500",badge:"bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-500 border-emerald-100 dark:border-emerald-500/20"}},j=o=>M[o]||M.Upcoming,H=(o,t)=>{if(!o)return"TBA";const c={month:"short",day:"numeric"},r=new Date(o).toLocaleDateString("en-US",c),i=new Date(t).toLocaleDateString("en-US",{...c,year:"numeric"});return`${r} - ${i}`},$=o=>{l.status=o,l.fetchTrainings(1)},L=T(()=>Array.from({length:m.value},(o,t)=>t+1)),v=async o=>{o>=1&&o<=m.value&&(await l.fetchTrainings(o),window.scrollTo({top:0,behavior:"smooth"}))},N=q(()=>l.fetchTrainings(),500);P([h,y],()=>{N()}),E(()=>l.fetchTrainings());const B=T(()=>z.roles||"Guest"),U=o=>{console.log("Delete triggered for",o.t_name)};return(o,t)=>{const c=O("router-link");return s(),n("div",K,[e("div",Q,[e("div",W,[t[4]||(t[4]=e("div",{class:"space-y-1"},[e("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 tracking-tight"}," Training Programs "),e("p",{class:"text-sm text-zinc-500 dark:text-zinc-400"}," Monitor and manage educational sessions and eligibility. ")],-1)),B.value.includes("Admin")?(s(),n("div",X,[w(c,{to:"/admin/training/program/create",class:"inline-flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-xl transition-all shadow-lg shadow-blue-500/20 active:scale-95"},{default:f(()=>[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" New Program ",-1)])]),_:1})])):k("",!0)]),e("div",Y,[e("div",Z,[(s(),n(g,null,x(["All","Draft","Upcoming","Ongoing","Completed"],r=>e("button",{key:r,onClick:i=>$(r),class:p([a(y)===r?"bg-blue-600 text-white shadow-md":"bg-white dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-white/10 hover:border-blue-500/50","px-4 py-1.5 rounded-xl border text-xs font-bold transition-all active:scale-95"])},d(r),11,ee)),64))]),e("div",te,[t[5]||(t[5]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>I(h)?h.value=r:null),type:"text",placeholder:"Search programs by name...",class:"block w-full pl-10 pr-4 py-2.5 text-sm rounded-xl border transition-all bg-white dark:bg-zinc-900/50 border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-zinc-100 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"},null,512),[[G,a(h)]])])])]),e("div",re,[a(C)?(s(),n("div",oe,[(s(),n(g,null,x(3,r=>e("div",{key:r,class:"animate-pulse flex flex-col md:flex-row gap-6 p-5 rounded-2xl border border-zinc-200 dark:border-white/10 bg-white dark:bg-zinc-900/50"},[...t[6]||(t[6]=[V('<div class="w-full md:w-32 h-32 bg-zinc-200 dark:bg-zinc-800 rounded-2xl"></div><div class="flex-1 space-y-4 py-1"><div class="h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-3/4"></div><div class="space-y-2"><div class="h-3 bg-zinc-200 dark:bg-zinc-800 rounded"></div><div class="h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6"></div></div><div class="flex gap-2"><div class="h-6 bg-zinc-200 dark:bg-zinc-800 rounded w-16"></div><div class="h-6 bg-zinc-200 dark:bg-zinc-800 rounded w-16"></div></div></div>',2)])])),64))])):a(_).length===0?(s(),n("div",se,[...t[7]||(t[7]=[V('<div class="p-4 rounded-full bg-zinc-100 dark:bg-white/10 mb-4 text-zinc-400"><svg class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><h3 class="text-zinc-900 dark:text-zinc-100 font-semibold">No programs found</h3><p class="text-zinc-500 text-sm mt-1">Try a different search or create a new session.</p>',3)])])):(s(),n("div",ne,[(s(!0),n(g,null,x(a(_),r=>(s(),n("div",{key:r._id,class:"group relative flex flex-col md:flex-row md:items-center gap-6 p-5 rounded-2xl border transition-all duration-300 bg-white dark:bg-zinc-900/50 border-zinc-200 dark:border-white/10 hover:shadow-xl hover:border-blue-500/40"},[e("div",ae,[e("img",{src:A(r.t_banner),class:"w-full md:w-32 h-32 md:h-32 rounded-2xl object-cover shadow-md border border-zinc-100 dark:border-white/5"},null,8,de),e("div",{class:p(["absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-white dark:border-zinc-900 shadow-sm animate-pulse",j(r.t_status).color])},null,2)]),e("div",ie,[e("div",le,[e("h3",ce,d(r.t_name),1),e("span",{class:p(["px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border whitespace-nowrap",j(r.t_status).badge])},d(r.t_status),3)]),e("div",be,[e("span",ue,[t[8]||(t[8]=e("svg",{class:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),u(" "+d(H(r.t_start_date,r.t_end_date)),1)]),r.t_category?(s(),n("span",ge,[t[9]||(t[9]=e("svg",{class:"w-4 h-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),u(" "+d(r.t_category.name||"General"),1)])):k("",!0),e("span",xe,[t[10]||(t[10]=e("svg",{class:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),u(" Cap: "+d(r.t_capacity),1)])]),e("div",me,[(s(!0),n(g,null,x(r.t_eligibility,i=>(s(),n("span",{key:i._id,class:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-tight bg-blue-50/50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-500/20"},d(i.group_name),1))),128))]),e("div",he,[w(c,{to:{name:"training.session",params:{id:r._id}},class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-500/20 hover:bg-emerald-600 hover:text-white transition-all active:scale-95"},{default:f(()=>[...t[11]||(t[11]=[u(" Manage ",-1)])]),_:1},8,["to"])])]),B.value.includes("Admin")?(s(),n("div",ke,[w(c,{to:{name:"training.program.edit",params:{id:r._id}},class:"flex-1 p-2.5 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 hover:bg-blue-600 hover:text-white transition-all shadow-sm"},{default:f(()=>[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2.5 2.5 0 113.536 3.536L12 20.364H8v-4.364l9.293-9.293z"})],-1)])]),_:1},8,["to"]),e("button",{onClick:i=>U(r),class:"flex-1 p-2.5 rounded-xl bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-500 hover:bg-red-600 hover:text-white transition-all shadow-sm"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,pe)])):k("",!0)]))),128))]))]),!a(C)&&a(m)>=1?(s(),n("nav",ve,[e("ul",we,[e("li",null,[e("button",{onClick:t[1]||(t[1]=r=>v(a(b)-1)),disabled:a(b)===1,class:"p-2.5 rounded-xl border border-zinc-200 dark:border-white/10 text-zinc-500 hover:bg-zinc-100 dark:hover:bg-white/10 disabled:opacity-30 transition-all"},[...t[14]||(t[14]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,fe)]),(s(!0),n(g,null,x(L.value,r=>(s(),n("li",{key:r},[e("button",{onClick:i=>v(r),class:p([r===a(b)?"bg-blue-600 text-white border-blue-600":"text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-white/10 hover:bg-zinc-100 dark:hover:bg-white/10","w-10 h-10 rounded-xl border text-sm font-bold transition-all"])},d(r),11,ze)]))),128)),e("li",null,[e("button",{onClick:t[2]||(t[2]=r=>v(a(b)+1)),disabled:a(b)===a(m),class:"p-2.5 rounded-xl border border-zinc-200 dark:border-white/10 text-zinc-500 hover:bg-zinc-100 dark:hover:bg-white/10 disabled:opacity-30 transition-all"},[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,_e)])])])):k("",!0)])}}};export{Ve as default};
