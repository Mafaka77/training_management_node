import{y as N,s as S,m as T,o as l,c as a,a as t,j as d,u as g,F as x,r as y,n as V,t as h,b,w as c,z as E,A as F,h as m,J as I}from"./index-BKnsya-o.js";import{u as U}from"./masterStore-Bj372cpu.js";import{B}from"./BaseModal-BgL2Kkpi.js";import{I as $}from"./ImagePicker-C3ZGEQW8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"space-y-4"},P={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},R={key:1,class:"flex flex-col items-center justify-center py-16 bg-zinc-50 dark:bg-white/5 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-white/10"},O={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J={class:"relative h-44 w-full overflow-hidden bg-zinc-100 dark:bg-zinc-800"},q=["src","alt"],G={class:"absolute top-3 left-3"},K={class:"p-4 flex items-center justify-between"},Q={class:"min-w-0"},W={class:"text-sm font-semibold text-zinc-900 dark:text-white truncate"},X={class:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0"},Y=["onClick"],Z=["onClick"],ee={class:"font-bold text-zinc-900 dark:text-zinc-100"},te={class:"space-y-4 pt-2"},oe={class:"space-y-1"},se={class:"space-y-1"},ce={__name:"Index",setup(re){const C="https://staging2.egovmz.in",i=U(),n=N(),u=m(!1),p=m(null),v=m(!1),w=m(!1),r=I({title:"",banner:""}),{banners:k,isBannerLoading:M}=S(i),_=o=>{p.value=o,u.value=!0},j=()=>{r.title="",r.banner="",v.value=!0},z=()=>{v.value=!1};function D(o){r.banner=o}const L=async()=>{if(!r.title||!r.banner){n.error("Please provide both a title and an image.");return}const o=new FormData;o.append("title",r.title),o.append("banner",r.banner);try{w.value=!0;const e=await i.submitBanner(o);e.success?(n.success(e.message||"Banner saved successfully!"),await i.fetchBanners(),z()):n.error(e.message||"Failed to save banner.")}catch(e){n.error("An unexpected error occurred."),console.error("Banner Upload Error:",e)}finally{w.value=!1}},A=async()=>{if(p.value)try{const o=await i.deleteBanner(p.value._id);o.success?(n.success(o.message),await i.fetchBanners(),u.value=!1):n.error(o.message)}catch{n.error("Failed to delete banner.")}};return T(()=>{i.fetchBanners()}),(o,e)=>(l(),a(x,null,[t("div",H,[t("div",{class:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6"},[e[4]||(e[4]=t("div",{class:"space-y-1"},[t("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 tracking-tight"}," BANNERS "),t("p",{class:"text-sm text-zinc-500 dark:text-zinc-400"}," Manage and organize promotional banners ")],-1)),t("button",{onClick:j,class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-xl transition-all shadow-md active:scale-95"},[...e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),d(" New Banner ",-1)])])]),g(M)?(l(),a("div",P,[(l(),a(x,null,y(6,s=>t("div",{key:s,class:"h-48 w-full rounded-2xl border border-zinc-200 dark:border-white/10 bg-zinc-100 dark:bg-white/5 animate-pulse"})),64))])):g(k).length===0?(l(),a("div",R,[...e[5]||(e[5]=[t("div",{class:"p-4 rounded-full bg-zinc-100 dark:bg-white/5 mb-3 text-zinc-400"},[t("svg",{class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),t("h3",{class:"text-zinc-900 dark:text-zinc-100 font-medium"},"No Banners found",-1)])])):(l(),a("div",O,[(l(!0),a(x,null,y(g(k),s=>(l(),a("div",{key:s._id,class:"group relative flex flex-col overflow-hidden rounded-2xl border transition-all duration-300 bg-white dark:bg-zinc-900 border-zinc-200 dark:border-white/10 hover:shadow-xl hover:border-blue-500/50"},[t("div",J,[t("img",{src:`${g(C)}${s.image_url}`,alt:s.title,class:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",onError:e[0]||(e[0]=f=>f.target.src="https://placehold.co/600x400?text=Image+Not+Found")},null,40,q),t("div",G,[t("span",{class:V([s.is_active?"bg-green-500":"bg-zinc-400","flex items-center gap-1.5 px-2 py-1 rounded-md text-[10px] font-bold text-white uppercase tracking-wider shadow-sm"])},h(s.is_active?"Active":"Draft"),3)])]),t("div",K,[t("div",Q,[t("h4",W,h(s.title||"Untitled Banner"),1)]),t("div",X,[t("button",{onClick:f=>o.openEditModal(s),class:"p-2 rounded-lg text-zinc-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 hover:text-blue-600 transition-colors"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Y),t("button",{onClick:f=>_(s),class:"p-2 rounded-lg text-zinc-500 hover:bg-red-50 dark:hover:bg-red-500/10 hover:text-red-600 transition-colors"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Z)])])]))),128))]))]),b(B,{show:u.value,confirmVariant:"danger",onClose:e[1]||(e[1]=s=>u.value=!1),onConfirm:A},{icon:c(()=>[...e[8]||(e[8]=[t("div",{class:"w-12 h-12 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-500 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)])]),title:c(()=>[...e[9]||(e[9]=[d("Delete Banner",-1)])]),content:c(()=>[e[10]||(e[10]=d(" Are you sure you want to delete ",-1)),t("span",ee,h(p.value?.title),1),e[11]||(e[11]=d("? This action cannot be undone. ",-1))]),"confirm-text":c(()=>[...e[12]||(e[12]=[d("Delete Permanently",-1)])]),_:1},8,["show"]),b(B,{show:v.value,onClose:z,onConfirm:L,confirmText:"Save Banner"},{title:c(()=>[...e[13]||(e[13]=[d("Add New Banner",-1)])]),content:c(()=>[t("div",te,[t("div",oe,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},"Banner Title",-1)),E(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.title=s),type:"text",class:"w-full px-4 py-2 rounded-xl border border-zinc-200 dark:border-white/10 bg-white dark:bg-zinc-900 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Summer Sale 2026"},null,512),[[F,r.title]])]),t("div",se,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-300"},"Upload Image",-1)),b($,{type:"file",accept:".png, .jpg, .jpeg",class:"h-[188px]",onChange:D})])])]),_:1},8,["show"])],64))}};export{ce as default};
