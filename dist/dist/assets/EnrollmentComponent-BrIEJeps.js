import{q,K as w,y as L,s as T,H,m as I,o as l,c as d,a as e,j as S,u as b,F as C,r as j,t as r,b as y,w as A,I as X,k as B,T as U,h as $,J as G,P as K,e as O,z as F,G as W,i as E,N as J,p as N,x as Q,n as V,A as Y}from"./index-BKnsya-o.js";import{B as Z}from"./BaseInput-DAJM1Ly-.js";import{_ as ee}from"./FilePicker-CES6qz3O.js";import{u as te}from"./attendanceStore-irCyxFuh.js";import{u as se}from"./enrollmentStore-CQTNmjYL.js";const oe=q("session",{state:()=>({sessions:[],isSessionLoading:!1,trainers:[],materials:[],isMaterialLoading:!1,expandedDates:new Set,activeTab:"schedule"}),actions:{async fetchSession(a){try{const s=await w.get(`/programs/${a}/courses`);this.sessions=s.data.courses}catch{}},async getTrainers(){try{var a=await w.get("/trainers");this.trainers=a.data.trainers}catch{}},async submitSession(a){console.log(a);try{const s=await w.post("/submit-training-course",a),o=s.data.status||s.status;return o===201||o===200?{success:!0,message:s.data.message}:{success:!1,message:s.data.message}}catch(s){return{success:!1,message:s.message}}},async updateSession(a,s){try{const o=await w.put(`/course/${s}`,a);return(o.data.status||o.status)===200?{success:!0,message:o.data.message}:{success:!1,message:o.data.message}}catch(o){return{success:!1,message:o.message}}},async fetchMaterials(a){try{var s=await w.get(`/materials/${a}`);console.log(s.data),this.materials=s.data.materials}catch{}},async submitMaterial(a){console.log(a);try{const s=await w.post("/material",a),o=s.status||s.data.status;return o===200||o===201?{success:!0,message:s.data.message}:{success:!1,message:s.data.message}}catch(s){return{success:!1,message:s.message}}},async deleteMaterial(a){try{const s=await w.delete(`/material/${a}`);return(s.status||s.data.status)===200?{success:!0,message:s.data.message}:{success:!1,message:s.data.message}}catch(s){return{success:!1,message:s.message}}},async deleteSession(a){try{const s=await w.delete(`/course/${a}`);return s.status===200||s.data.status===200?{success:!0,message:s.data.message}:{success:!1,nessage:s.data.message}}catch(s){return{success:!1,message:s.message}}}}}),ae={class:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300"},re={class:"flex items-center justify-between"},ne={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ie={class:"w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center text-blue-600"},le={key:0,class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},de={key:1,class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ce={class:"flex-1 min-w-0"},ue={class:"text-sm font-bold text-zinc-900 dark:text-zinc-100 truncate group-hover:text-blue-600 transition-colors"},pe={class:"flex flex-col gap-1 mt-0.5"},xe={class:"flex items-center gap-2"},ge={class:"text-[10px] font-black text-blue-500/80 dark:text-blue-400/80 uppercase tracking-widest"},me={class:"text-[10px] font-medium text-zinc-500 dark:text-zinc-400 uppercase"},he={class:"flex items-center gap-1.5 pt-0.5"},be={class:"text-[10px] text-zinc-500 dark:text-zinc-400 italic"},fe={class:"font-bold text-zinc-700 dark:text-zinc-300 not-italic"},ve={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all"},ke=["href"],we=["onClick"],_e={key:1,class:"py-24 text-center bg-zinc-50 dark:bg-white/5 rounded-3xl border-2 border-dashed border-zinc-200 dark:border-white/10"},ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-zinc-900/60 backdrop-blur-sm"},ye={class:"bg-white dark:bg-zinc-900 w-full max-w-lg rounded-3xl shadow-2xl border border-zinc-200 dark:border-white/10 overflow-hidden"},$e={class:"px-6 py-4 border-b border-zinc-100 dark:border-white/5 flex items-center justify-between bg-zinc-50/50 dark:bg-white/2"},Ce={class:"flex items-center justify-end gap-3 pt-4 border-t border-zinc-100 dark:border-white/5"},Me=["disabled"],Se={key:0,class:"flex items-center gap-2"},Nt={__name:"Materials",props:{programId:{type:String,required:!0}},setup(a){const s=L(),o=oe(),{materials:f}=T(o),v=H(),x=a,h=$(!1),i=$(!1),k=$(!1),c=G({title:"",materials:[],programId:""}),_=g=>{if(!g)return"0 KB";const t=1024,p=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(g)/Math.log(t));return parseFloat((g/Math.pow(t,m)).toFixed(1))+" "+p[m]},D=async()=>{i.value=!0;const g=new FormData;c.materials.forEach(t=>{g.append("materials",t)}),g.append("title",c.title),g.append("programId",x.programId);try{const t=await o.submitMaterial(g);t.success?(s.success(t.message),await o.fetchMaterials(x.programId),c.title="",c.materials=[],h.value=!1):s.warning(t.message)}catch(t){s.warning(t)}finally{i.value=!1}};async function P(g){v.show("Deleting material......"),k.value=!0;try{const t=await o.deleteMaterial(g);t.success?(s.success(t.message),await o.fetchMaterials(x.programId)):s.warning(t.message)}catch(t){s.error(t)}finally{v.hide(),k.value=!1}}const M=g=>g?{"application/msword":"DOC","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX","application/vnd.ms-powerpoint":"PPT","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/pdf":"PDF","image/jpeg":"JPG","image/png":"PNG"}[g]||g.split("/")[1]?.split(".").pop()?.toUpperCase()||"DOC":"FILE";return I(async()=>{o.fetchMaterials(x.programId)}),(g,t)=>(l(),d("div",ae,[e("div",re,[t[6]||(t[6]=e("div",{class:"space-y-1"},[e("h2",{class:"text-xl font-bold text-zinc-900 dark:text-zinc-100"},"Study Materials"),e("p",{class:"text-xs text-zinc-500"},"Upload PDFs, slides, or documents for this program.")],-1)),e("button",{onClick:t[0]||(t[0]=p=>h.value=!0),class:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-lg shadow-blue-500/20 active:scale-95 transition-all"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),S(" Upload Material ",-1)])])]),b(f).length>0?(l(),d("div",ne,[(l(!0),d(C,null,j(b(f),p=>(l(),d("div",{key:p._id,class:"p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-white/10 rounded-2xl flex items-center gap-4 group hover:border-blue-500/50 transition-all shadow-sm"},[e("div",ie,[p.m_type==="pdf"?(l(),d("svg",le,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):(l(),d("svg",de,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))]),e("div",ce,[e("h4",ue,r(p.title),1),e("div",pe,[e("div",xe,[e("span",ge,r(M(p.mime_type)),1),t[9]||(t[9]=e("span",{class:"w-1 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"},null,-1)),e("span",me,r(_(p.file_size)),1)]),e("div",he,[t[11]||(t[11]=e("div",{class:"w-4 h-4 rounded-full bg-zinc-100 dark:bg-white/5 flex items-center justify-center border border-zinc-200 dark:border-white/10"},[e("svg",{class:"w-2.5 h-2.5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("span",be,[t[10]||(t[10]=S(" Uploaded by ",-1)),e("span",fe,r(p.uploadedBy?.full_name),1)])])])]),e("div",ve,[e("a",{href:p.m_url,target:"_blank",class:"p-2 text-zinc-400 hover:text-blue-500 transition-colors"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z","stroke-width":"2"})],-1)])],8,ke),e("button",{onClick:m=>P(p._id),class:"p-2 text-zinc-400 hover:text-red-500 transition-colors"},[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16","stroke-width":"2"})],-1)])],8,we)])]))),128))])):(l(),d("div",_e,[...t[14]||(t[14]=[e("p",{class:"text-zinc-500 text-sm"},"No study materials found for this program.",-1)])])),y(U,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[h.value?(l(),d("div",ze,[e("div",ye,[e("div",$e,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold text-zinc-900 dark:text-zinc-100"},"Upload Material",-1)),e("button",{onClick:t[1]||(t[1]=p=>h.value=!1),class:"text-zinc-400 hover:text-zinc-600 transition-colors"},[...t[15]||(t[15]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:X(D,["prevent"]),class:"p-6 space-y-5"},[y(Z,{modelValue:c.title,"onUpdate:modelValue":t[2]||(t[2]=p=>c.title=p),label:"Document Title",placeholder:"e.g. Week 1 Logic Exercises",required:""},null,8,["modelValue"]),y(ee,{modelValue:c.materials,"onUpdate:modelValue":t[3]||(t[3]=p=>c.materials=p)},null,8,["modelValue"]),e("div",Ce,[e("button",{type:"button",onClick:t[4]||(t[4]=p=>h.value=!1),class:"px-5 py-2.5 text-sm font-bold text-zinc-500 hover:bg-zinc-100 dark:hover:bg-white/5 rounded-xl transition-all"},"Cancel"),e("button",{type:"submit",disabled:i.value||!c.materials,class:"group relative px-6 py-2.5 bg-blue-600 text-white text-sm font-bold rounded-xl shadow-lg shadow-blue-500/30 hover:bg-blue-700 active:scale-95 transition-all disabled:opacity-50 disabled:active:scale-100 flex items-center gap-2 overflow-hidden"},[i.value?(l(),d("span",Se,[...t[17]||(t[17]=[e("svg",{class:"w-4 h-4 animate-spin",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" Uploading... ",-1)])])):(l(),d(C,{key:1},[t[18]||(t[18]=e("svg",{class:"w-4 h-4 transform group-hover:-translate-y-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),t[19]||(t[19]=e("span",null,"Start Upload",-1))],64))],8,Me)])],32)])])):B("",!0)]),_:1})]))}},je={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-zinc-950/80 backdrop-blur-sm"},Be={class:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-3xl shadow-2xl border border-zinc-200 dark:border-white/10 overflow-hidden"},Ae={class:"p-6 text-center"},De={class:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-2"},Pe={class:"text-sm text-zinc-500 dark:text-zinc-400 mb-6 leading-relaxed"},Te={class:"flex flex-col sm:flex-row gap-3"},Ie=["disabled"],Ve={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},Rt={__name:"DeleteDialog",props:{show:Boolean,loading:Boolean,title:String,message:String,confirmText:String},emits:["close","confirm"],setup(a,{emit:s}){const o=s,f=()=>o("close"),v=()=>o("confirm");return(x,h)=>{const i=K("click-outside");return l(),O(U,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[a.show?(l(),d("div",je,[F((l(),d("div",Be,[e("div",Ae,[h[0]||(h[0]=e("div",{class:"mx-auto w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),e("h3",De,r(a.title||"Confirm Deletion"),1),e("p",Pe,r(a.message||"Are you sure you want to delete this item? This action cannot be undone."),1),e("div",Te,[e("button",{onClick:f,class:"flex-1 px-5 py-3 text-sm font-bold text-zinc-500 hover:bg-zinc-100 dark:hover:bg-white/5 rounded-2xl transition-all"}," Cancel "),e("button",{onClick:v,disabled:a.loading,class:"flex-1 px-5 py-3 bg-red-600 text-white text-sm font-bold rounded-2xl shadow-lg shadow-red-500/30 hover:bg-red-700 transition-all disabled:opacity-50 flex items-center justify-center gap-2"},[a.loading?(l(),d("span",Ve)):B("",!0),S(" "+r(a.confirmText||"Delete Item"),1)],8,Ie)])])])),[[i,f]])])):B("",!0)]),_:1})}}},Le={class:"space-y-6"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Fe={class:"p-4 bg-white text-center dark:bg-zinc-900 border border-zinc-200 dark:border-white/5 rounded-2xl shadow-sm"},Ee={class:"text-2xl font-black text-zinc-900 dark:text-zinc-100"},Ne={class:"p-4 bg-white text-center dark:bg-zinc-900 border border-zinc-200 dark:border-white/5 rounded-2xl shadow-sm"},Re={class:"text-2xl font-black text-blue-500"},qe={class:"p-4 bg-white text-center dark:bg-zinc-900 border border-zinc-200 dark:border-white/5 rounded-2xl shadow-sm"},He={class:"text-2xl text-center font-black text-emerald-500"},Xe={class:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm"},Ge={class:"w-full text-left"},Ke={class:"divide-y divide-zinc-100 dark:divide-white/5"},Oe={class:"px-6 py-4"},We={class:"flex items-center gap-3"},Je={class:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center border border-zinc-200 dark:border-white/10"},Qe={class:"text-sm font-black text-zinc-500 uppercase"},Ye={class:"text-sm font-bold text-zinc-900 dark:text-zinc-100"},Ze={class:"text-[10px] font-mono text-zinc-500 uppercase"},et={class:"px-6 py-4"},tt={class:"flex items-baseline gap-1 tabular-nums"},st={class:"text-sm font-black text-zinc-900 dark:text-zinc-100"},ot={class:"text-xs text-zinc-400 text-bold"},at={class:"px-6 py-4"},rt={class:"flex items-center gap-4"},nt={class:"flex-1 h-1.5 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden min-w-[100px]"},it={class:"text-[10px] font-black text-zinc-600 dark:text-zinc-400 w-8"},lt={class:"px-6 py-4 text-right"},dt={class:"flex items-center justify-end gap-2"},qt={__name:"AttendanceComponent",props:{programId:{type:String,required:!0}},setup(a){W();const s=te(),{attendanceData:o,totalSessions:f}=T(s),v=a,x=N(()=>{if(!o.value.length)return 0;const h=o.value.reduce((i,k)=>i+k.percentage,0);return Math.round(h/o.value.length)});return I(()=>{s.fetchAttendances(v.programId)}),(h,i)=>{const k=E("router-link");return l(),d("div",Le,[e("div",Ue,[e("div",Fe,[i[0]||(i[0]=e("p",{class:"text-[10px] font-black uppercase tracking-widest text-zinc-400"},"Registry Size",-1)),e("p",Ee,r(b(o).length)+" Trainees",1)]),e("div",Ne,[i[1]||(i[1]=e("p",{class:"text-[10px] font-black uppercase tracking-widest text-zinc-400"},"Program Completion",-1)),e("p",Re,r(x.value)+"% Avg",1)]),e("div",qe,[i[2]||(i[2]=e("p",{class:"text-[10px] font-black uppercase tracking-widest text-zinc-400"},"Total Session",-1)),e("p",He,r(b(f)),1)])]),e("div",Xe,[e("table",Ge,[i[4]||(i[4]=e("thead",{class:"bg-zinc-50 dark:bg-white/[0.02] border-b border-zinc-100 dark:border-white/5"},[e("tr",null,[e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-400 w-1/3"},"Trainee"),e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-400"},"Total Appearance"),e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-400"},"Persistence"),e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-400 text-right"},"Action")])],-1)),e("tbody",Ke,[(l(!0),d(C,null,j(b(o),c=>(l(),d("tr",{key:c._id,class:"group hover:bg-zinc-50/50 dark:hover:bg-white/[0.01] transition-colors"},[e("td",Oe,[e("div",We,[e("div",Je,[e("span",Qe,r(c.user.full_name.charAt(0)),1)]),e("div",null,[e("p",Ye,r(c.user.full_name),1),e("p",Ze,"UID: "+r(c.user._id.slice(-6)),1)])])]),e("td",et,[e("div",tt,[e("span",st,r(c.attendedCount),1),e("span",ot,"/ "+r(b(f))+" Sessions",1)])]),e("td",at,[e("div",rt,[e("div",nt,[e("div",{class:"h-full transition-all duration-700 bg-blue-500",style:J({width:c.percentage+"%"})},null,4)]),e("span",it,r(c.percentage)+"%",1)])]),e("td",lt,[e("div",dt,[y(k,{to:{name:"training.trainee.attendance",params:{id:v.programId,traineeId:c.user._id}},class:"p-2 rounded-lg bg-zinc-100 dark:bg-white/5 text-zinc-500 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-all active:scale-95 group",title:"View Trainee Attendance"},{default:A(()=>[...i[3]||(i[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 transition-transform group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.644C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),_:1},8,["to"])])])]))),128))])])])])}}},ct={class:"max-w-[90rem] mx-auto pb-10"},ut={class:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8"},pt={class:"flex flex-wrap items-center gap-3"},xt={class:"flex items-center bg-zinc-100 dark:bg-white/5 p-1 rounded-xl border border-zinc-200 dark:border-white/10"},gt=["onClick"],mt={class:"relative group"},ht={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm"},bt={class:"overflow-x-auto"},ft={class:"w-full text-left border-collapse"},vt={class:"divide-y divide-zinc-100 dark:divide-white/5"},kt={class:"px-6 py-4"},wt={class:"flex items-center gap-3"},_t={class:"h-10 w-10 rounded-full bg-blue-600/10 text-blue-600 flex items-center justify-center font-black text-xs uppercase"},zt={class:"text-sm font-bold text-zinc-900 dark:text-zinc-100"},yt={class:"text-[11px] text-zinc-500"},$t={class:"px-6 py-4 text-sm text-zinc-600 dark:text-zinc-400"},Ct={class:"px-6 py-4 text-center"},Mt={class:"px-6 py-4 text-right"},St={class:"flex items-center justify-end gap-2"},jt=["onClick"],Bt={class:"px-6 py-4 bg-zinc-50 dark:bg-white/[0.02] border-t border-zinc-200 dark:border-white/10 flex items-center justify-between"},At={class:"text-xs text-zinc-500 font-medium"},Dt={class:"flex items-center gap-1"},Pt=["disabled"],Tt={class:"text-xs font-bold px-3 text-zinc-700 dark:text-zinc-300"},It=["disabled"],Ht={__name:"EnrollmentComponent",props:{programId:{type:String,required:!0}},setup(a){const s=Q(),o=se(),f=L(),{enrollments:v,pagination:x}=T(o),h=$("All"),i=$("");let k=null;const c=a,_=(m=1)=>{o.fetchEnrollmentsByProgram(c.programId,{page:m,status:h.value==="All"?"":h.value,search:i.value})},D=m=>{h.value=m,_(1)},P=()=>{clearTimeout(k),k=setTimeout(()=>{_(1)},500)},M=m=>{_(m)},g=m=>({Approved:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",Pending:"bg-amber-500/10 text-amber-500 border-amber-500/20",Rejected:"bg-rose-500/10 text-rose-500 border-rose-500/20",Waitlisted:"bg-blue-500/10 text-blue-500 border-blue-500/20"})[m]||"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",t=async(m,n)=>{const z=await o.updateEnrollmentStatus(m,n);z.success?(f.success(z.message),_(x.value.page)):f.error(z.message)},p=N(()=>{const m=Array.isArray(s.roles)?s.roles:[s.roles];return m.includes("Admin")||m.some(n=>["Director"].includes(n))?"admin.enrollment.detail":"trainer.dashboard"});return I(()=>_()),(m,n)=>{const z=E("router-link");return l(),d("div",ct,[e("div",ut,[n[4]||(n[4]=e("div",null,[e("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 tracking-tight"}," Enrollment Requests "),e("p",{class:"text-sm text-zinc-500 mt-1"},"Manage and review trainee applications for programs.")],-1)),e("div",pt,[e("div",xt,[(l(),d(C,null,j(["All","Pending","Approved","Rejected","Waitlisted"],u=>e("button",{key:u,onClick:R=>D(u),class:V([[h.value===u?"bg-white dark:bg-zinc-800 text-blue-600 shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"],"px-4 py-1.5 text-xs font-bold rounded-lg transition-all"])},r(u),11,gt)),64))]),e("div",mt,[n[3]||(n[3]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500 group-focus-within:text-blue-500 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),F(e("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>i.value=u),onInput:P,type:"text",placeholder:"Search trainee or program...",class:"pl-10 pr-4 py-2 bg-white dark:bg-white/5 border border-zinc-200 dark:border-white/10 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all w-64"},null,544),[[Y,i.value]])])])]),e("div",ht,[e("div",bt,[e("table",ft,[n[7]||(n[7]=e("thead",null,[e("tr",{class:"bg-zinc-50 dark:bg-white/[0.02] border-b border-zinc-200 dark:border-white/10"},[e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-500"},"Trainee"),e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-500"},"Training Program"),e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-500 text-center"},"Status"),e("th",{class:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-zinc-500 text-right"},"Actions")])],-1)),e("tbody",vt,[(l(!0),d(C,null,j(b(v),u=>(l(),d("tr",{key:u._id,class:"hover:bg-zinc-50 dark:hover:bg-white/[0.02] transition-colors"},[e("td",kt,[e("div",wt,[e("div",_t,r(u.user?.full_name?.charAt(0)),1),e("div",null,[e("p",zt,r(u.user?.full_name),1),e("p",yt,r(u.user?.email),1)])])]),e("td",$t,r(u.training_program?.t_name),1),e("td",Ct,[e("span",{class:V([g(u.status),"px-3 py-1 rounded-full text-[10px] font-black uppercase border"])},r(u.status),3)]),e("td",Mt,[e("div",St,[y(z,{to:{name:p.value,params:{id:u._id,programId:u.training_program._id}},class:"p-2 hover:text-blue-500 transition-colors"},{default:A(()=>[...n[5]||(n[5]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["to"]),u.status==="Pending"?(l(),d("button",{key:0,onClick:R=>t(u._id,"Approved"),class:"p-2 text-zinc-400 hover:text-emerald-500"},[...n[6]||(n[6]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,jt)):B("",!0)])])]))),128))])])]),e("div",Bt,[e("span",At," Showing "+r(b(v).length)+" of "+r(b(x).total)+" results ",1),e("div",Dt,[e("button",{onClick:n[1]||(n[1]=u=>M(b(x).page-1)),disabled:b(x).page<=1,class:"p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-white/5 disabled:opacity-30 transition-colors"},[...n[8]||(n[8]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Pt),e("span",Tt," Page "+r(b(x).page)+" of "+r(b(x).totalPages),1),e("button",{onClick:n[2]||(n[2]=u=>M(b(x).page+1)),disabled:b(x).page>=b(x).totalPages,class:"p-2 rounded-lg hover:bg-zinc-200 dark:hover:bg-white/5 disabled:opacity-30 transition-colors"},[...n[9]||(n[9]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,It)])])])])}}};export{Nt as _,Ht as a,qt as b,Rt as c,oe as u};
