import{y as V,s as x,m as y,o as w,c as k,b as a,a as o,u as d,I as z,J as C,h as S}from"./index-BgI74CTB.js";import{u as T}from"./trainingStore-Zh-nsYK2.js";import{M as j}from"./MultiSelect-CimuzWS_.js";import{B as i}from"./BaseInput-BIy8msfQ.js";import{S as c}from"./SingleSelect-CBTn_G9M.js";import{I as B}from"./ImagePicker-BHcfio8Z.js";import{_ as D}from"./Breadcrumbs-DWJkQ30t.js";import{_ as M}from"./SearchSelect-BV2xN-ZQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"max-w-5xl mx-auto pb-12"},P={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl p-6 shadow-sm"},E={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},I={class:"md:col-span-2 space-y-4"},A={class:"md:col-span-1"},H={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl p-6 shadow-sm"},N={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},R={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl p-6 shadow-sm"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},F={class:"space-y-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O={class:"space-y-6"},L={class:"grid grid-cols-2 gap-4"},q={class:"flex items-center justify-end gap-4 pt-4"},re={__name:"Create",setup(J){const n=V(),s=T(),{categories:p,rooms:u,groups:g,directors:b}=x(s),m=S(!1),t=C({t_name:"",t_description:"",t_banner:null,t_start_date:"",t_end_date:"",t_duration:0,t_eligibility:[],t_organizer:"",t_capacity:0,t_category:"",t_room:"",t_director:""}),_=[{label:"Training",to:"/admin/training/program"},{label:"Create Program",to:"/admin/training/program/create"}];function f(l){t.t_banner=l}const h=async()=>{if(!t.t_name||!t.t_start_date||!t.t_category){n.error("Please fill in the required fields.");return}m.value=!0;const l=new FormData;Object.keys(t).forEach(e=>{if(e==="t_eligibility")t[e].forEach(r=>{const v=typeof r=="object"?r._id:r;l.append("t_eligibility",v)});else if(e==="t_banner")t[e]&&l.append("t_banner",t[e]);else if(t[e]!==null&&t[e]!==void 0){const r=typeof t[e]=="object"&&t[e]?._id?t[e]._id:t[e];l.append(e,r)}});try{const e=await s.submitTraining(l);e.success?n.success("Training program created successfully!"):n.error(e.message||"Failed to create training.")}catch(e){n.error("An unexpected error occurred."),console.error(e)}finally{m.value=!1}};return y(()=>{s.fetchCategories(),s.fetchRooms(),s.fetchGroups(),s.fetchDirectors()}),(l,e)=>(w(),k("div",U,[a(D,{items:_}),o("form",{onSubmit:z(h,["prevent"]),class:"space-y-6"},[o("section",P,[e[12]||(e[12]=o("div",{class:"flex items-center gap-2 mb-6 text-blue-600"},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),o("h2",{class:"text-lg font-bold tracking-tight"},"General Information")],-1)),o("div",E,[o("div",I,[a(i,{modelValue:t.t_name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.t_name=r),label:"Training Program Name",placeholder:"e.g. Advanced Cybersecurity Workshop",type:"text"},null,8,["modelValue"]),a(i,{modelValue:t.t_description,"onUpdate:modelValue":e[1]||(e[1]=r=>t.t_description=r),label:"Program Overview",placeholder:"Describe the objectives and outcomes...",type:"textarea",rows:"4"},null,8,["modelValue"])]),o("div",A,[e[11]||(e[11]=o("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"},"Program Banner",-1)),a(B,{type:"file",accept:".png, .jpg, .jpeg",class:"h-[188px]",onChange:f})])])]),o("section",H,[e[13]||(e[13]=o("div",{class:"flex items-center gap-2 mb-6 text-amber-500"},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),o("h2",{class:"text-lg font-bold tracking-tight"},"Timeline")],-1)),o("div",N,[a(i,{modelValue:t.t_start_date,"onUpdate:modelValue":e[2]||(e[2]=r=>t.t_start_date=r),label:"Start Date",type:"date"},null,8,["modelValue"]),a(i,{modelValue:t.t_end_date,"onUpdate:modelValue":e[3]||(e[3]=r=>t.t_end_date=r),label:"End Date",type:"date"},null,8,["modelValue"])])]),o("section",R,[e[14]||(e[14]=o("div",{class:"flex items-center gap-2 mb-6 text-emerald-500"},[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),o("h2",{class:"text-lg font-bold tracking-tight"},"Training Logistics")],-1)),o("div",$,[o("div",F,[o("div",G,[a(i,{modelValue:t.t_organizer,"onUpdate:modelValue":e[4]||(e[4]=r=>t.t_organizer=r),label:"Organizer / Department",placeholder:"e.g. HR Department",type:"text"},null,8,["modelValue"]),a(M,{modelValue:t.t_director,"onUpdate:modelValue":e[5]||(e[5]=r=>t.t_director=r),options:d(b),label:"Training Director",placeholder:"e.g. Director Name",type:"text"},null,8,["modelValue","options"])]),a(j,{modelValue:t.t_eligibility,"onUpdate:modelValue":e[6]||(e[6]=r=>t.t_eligibility=r),options:d(g),"track-by":"_id","option-label":"group_name",label:"Target Eligibility Groups",placeholder:"Select allowed groups"},null,8,["modelValue","options"])]),o("div",O,[o("div",L,[a(i,{modelValue:t.t_capacity,"onUpdate:modelValue":e[7]||(e[7]=r=>t.t_capacity=r),label:"Seat Capacity",placeholder:"50",type:"number"},null,8,["modelValue"]),a(c,{modelValue:t.t_category,"onUpdate:modelValue":e[8]||(e[8]=r=>t.t_category=r),options:d(p),"track-by":"_id","option-label":"name",label:"Category",placeholder:"Select Type"},null,8,["modelValue","options"])]),a(c,{modelValue:t.t_room,"onUpdate:modelValue":e[9]||(e[9]=r=>t.t_room=r),options:d(u),"track-by":"_id","option-label":"room_name",label:"Assigned Room / Venue",placeholder:"Select Venue"},null,8,["modelValue","options"])])])]),o("div",q,[o("button",{type:"button",onClick:e[10]||(e[10]=r=>l.$router.back()),class:"px-6 py-2.5 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:hover:bg-white/5 font-semibold transition-all"}," Cancel "),e[15]||(e[15]=o("button",{type:"submit",class:"px-8 py-2.5 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-lg shadow-blue-500/30 transition-all active:scale-95"}," Create Training Program ",-1))])],32)]))}};export{re as default};
