import{s as P,y as D,m as R,o as l,c as d,b as i,u as o,a as e,t as r,n as N,j as $,k,g as B,G as M,h as f,C as E}from"./index-DBqKtzZ_.js";import{_ as V}from"./Breadcrumbs-6PipYh8h.js";import{_ as p}from"./DetailItem-7YfXwfh8.js";import{u as T}from"./enrollmentStore-rWBItcmT.js";import{_ as w}from"./Dialog-CRAb-lZW.js";const H={class:"max-w-6xl mx-auto pb-12"},U={key:0,class:"flex flex-col items-center justify-center py-24 gap-4"},q={key:1,class:"space-y-6"},G={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm"},L={class:"p-8 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.01]"},F={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6"},I={class:"flex items-center gap-5"},O={class:"h-20 w-20 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-blue-500/20"},J={class:"flex items-center gap-3"},K={class:"text-2xl font-black text-zinc-900 dark:text-zinc-100 uppercase tracking-tight italic"},Q={class:"text-zinc-500 font-medium"},W={class:"grid grid-cols-1 lg:grid-cols-3 divide-y lg:divide-y-0 lg:divide-x divide-zinc-100 dark:divide-white/5"},X={class:"p-8 space-y-6"},Y={class:"grid grid-cols-1 gap-4"},Z={class:"p-8 space-y-6 bg-zinc-50/30 dark:bg-white/[0.01]"},ee={class:"space-y-4"},te={class:"text-sm font-black text-zinc-800 dark:text-zinc-200 mt-1"},se={class:"grid grid-cols-2 gap-4"},oe={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},ne={class:"grid grid-cols-2 gap-4"},re={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},ie={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},ae={class:"p-8 space-y-6"},le={key:0,class:"space-y-3"},de={key:1,class:"p-6 rounded-2xl border-2 border-dashed border-zinc-100 dark:border-white/5 flex flex-col items-center text-center"},fe={__name:"View",setup(ce){const u=T(),{enrollment:s,isLoading:_}=P(u),a=D(),y=M(),v=E(),m=f(!1),b=f(!1),g=f(!1),z=[{label:"Enrollments",to:"/admin/training/enrollments"},{label:"Application Detail"}],A=()=>{m.value=!0},C=()=>{g.value=!0},h=async n=>{try{const t=await u.updateEnrollmentStatus(s.value._id,n);t.success?(v.push("/admin/training/enrollments"),a.success(`Application ${n} successfully`)):a.error(t.message)}catch(t){a.error(t)}},j=async()=>{if(confirm("Are you sure you want to reset this application to Pending?"))try{const n=await u.updateEnrollmentStatus(s.value._id,"Pending");n.success?(v.push("/admin/training/enrollments"),a.success("Application marked Pending ")):a.error(n.message)}catch(n){a.error(n)}},S=n=>n==="Approved"?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":n==="Pending"?"bg-amber-500/10 text-amber-500 border-amber-500/20":n==="Rejected"?"bg-rose-500/10 text-rose-500 border-rose-500/20":"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",x=n=>n?new Date(n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A";return R(()=>{u.fetchEnrollmentById(y.params.id)}),(n,t)=>(l(),d("div",H,[i(V,{items:z}),o(_)?(l(),d("div",U,[...t[6]||(t[6]=[e("div",{class:"relative h-12 w-12"},[e("div",{class:"absolute inset-0 rounded-full border-4 border-blue-500/20"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin"})],-1),e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 animate-pulse"},"Fetching Application...",-1)])])):o(s)?(l(),d("div",q,[e("section",G,[e("div",L,[e("div",F,[e("div",I,[e("div",O,r(o(s).user?.full_name?.charAt(0)),1),e("div",null,[e("div",J,[e("h2",K,r(o(s).user?.full_name),1),e("span",{class:N([S(o(s).status),"px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border"])},r(o(s).status),3)]),e("p",Q,r(o(s).user?.email),1)])]),o(s).status!=="Pending"?(l(),d("button",{key:0,onClick:j,class:"text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-blue-500 flex items-center gap-2 transition-colors"},[...t[7]||(t[7]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),$(" Reset to Pending ",-1)])])):k("",!0)])]),e("div",W,[e("div",X,[t[8]||(t[8]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-blue-500"},"Trainee Profile",-1)),e("div",Y,[i(p,{label:"Department",value:o(s).user?.department||"N/A",icon:"OfficeBuilding"},null,8,["value"]),i(p,{label:"Designation",value:o(s).user?.designation||"N/A",icon:"BadgeCheck"},null,8,["value"]),i(p,{label:"Mobile",value:o(s).user?.mobile,icon:"Phone"},null,8,["value"]),i(p,{label:"Group",value:o(s).user?.group?.group_name,icon:""},null,8,["value"])])]),e("div",Z,[t[14]||(t[14]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-500"},"Program Details",-1)),e("div",ee,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Course Title",-1)),e("p",te,r(o(s).training_program?.t_name),1)]),e("div",se,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Applied Date",-1)),e("p",oe,r(x(o(s).enrolledAt)),1)]),t[11]||(t[11]=e("div",null,[e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Schedule"),e("p",{class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},"Upcoming")],-1))]),e("div",ne,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Start Date",-1)),e("p",re,r(x(o(s).training_program?.t_start_date)),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"End Date",-1)),e("p",ie,r(x(o(s).training_program?.t_end_date)),1)])])])]),e("div",ae,[t[16]||(t[16]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-rose-500"},"Admin Action",-1)),o(s).status==="Pending"?(l(),d("div",le,[e("button",{onClick:t[0]||(t[0]=c=>A(o(s))),class:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-emerald-600/20 active:scale-[0.98]"}," Approve Application "),e("button",{onClick:t[1]||(t[1]=c=>C(o(s))),class:"w-full bg-rose-600 hover:bg-rose-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-rose-600/20 active:scale-[0.98]"}," Reject Application ")])):(l(),d("div",de,[...t[15]||(t[15]=[B('<div class="h-10 w-10 rounded-full bg-zinc-100 dark:bg-white/5 flex items-center justify-center mb-3"><svg class="w-5 h-5 text-zinc-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><p class="text-xs font-bold text-zinc-500">Status is currently locked.</p><p class="text-[10px] text-zinc-400 mt-1">Reset to Pending to modify again.</p>',3)])]))])])])])):k("",!0),i(w,{show:m.value,loading:b.value,title:"Confirm Approval",message:"Are you sure you want to approve this request?","confirm-text":"Approve Now",onClose:t[2]||(t[2]=c=>m.value=!1),onConfirm:t[3]||(t[3]=c=>{h("Approved")})},null,8,["show","loading"]),i(w,{show:g.value,loading:b.value,title:"Confirm Rejection",message:"Are you sure you want to reject this request?","confirm-text":"Reject Now",onClose:t[4]||(t[4]=c=>g.value=!1),onConfirm:t[5]||(t[5]=c=>h("Rejected"))},null,8,["show","loading"])]))}};export{fe as default};
