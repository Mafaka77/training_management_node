import{s as I,m as j,o,c as l,a as e,b as h,w as f,j as p,u as x,t as r,k as m,F as v,r as w,n as k,T as P,G as S,i as N,p as z,h as A}from"./index-BOgTUK57.js";import{u as M}from"./attendanceStore-BCyjXlQ9.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"max-w-6xl mx-auto space-y-8 pb-12 text-slate-900 dark:text-slate-100"},L={class:"flex p-3 bg-slate-100/50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl","aria-label":"Breadcrumb"},R={class:"inline-flex items-center space-x-1 md:space-x-2"},G={class:"inline-flex items-center"},E={class:"flex items-center"},F={key:0,class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},O={class:"space-y-1"},Q={class:"text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight leading-none"},q={class:"flex items-center gap-2"},H={class:"text-slate-500 dark:text-zinc-400 text-sm"},J={class:"text-slate-900 dark:text-zinc-100 font-bold underline decoration-blue-500/30"},K={key:0,class:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-100 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 rounded-2xl text-emerald-700 dark:text-emerald-500 shadow-sm"},U={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},W={class:"text-[10px] font-black text-slate-400 dark:text-zinc-500 uppercase tracking-widest"},X={class:"space-y-6"},Y=["onClick"],Z={class:"flex items-center gap-5"},ee={class:"text-left"},te={class:"text-sm font-bold text-slate-800 dark:text-zinc-200"},se={class:"flex gap-2"},ne={class:"px-2.5 py-1 rounded-lg bg-slate-100 dark:bg-zinc-800 text-[10px] font-bold text-slate-600 dark:text-zinc-400"},ae={class:"px-2.5 py-1 rounded-lg bg-emerald-100 dark:bg-emerald-500/10 text-[10px] font-bold text-emerald-700 dark:text-emerald-500"},re={key:0,class:"border-t border-slate-100 dark:border-white/5 bg-slate-50/50 dark:bg-black/20"},oe={class:"p-4 space-y-3"},le={class:"flex items-center gap-4"},ie={class:"text-sm font-bold text-slate-800 dark:text-zinc-200 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"},de={class:"flex items-center gap-3 mt-1 text-[10px] font-semibold text-slate-500 dark:text-zinc-500 uppercase tracking-tighter"},ce={class:"flex items-center gap-1"},xe={class:"flex items-center gap-10 mt-4 md:mt-0"},ue={class:"text-right"},pe={class:"text-right min-w-[80px]"},me={class:"text-xs font-mono text-slate-600 dark:text-zinc-300"},ke={__name:"Index",setup(ge){const _=M(),{traineeAttendance:d}=I(_),g=S(),c=A([]),T=n=>{const t=c.value.indexOf(n);t>-1?c.value.splice(t,1):c.value.push(n)},y=z(()=>{const n=d.value?.records;if(!n)return{};const u=[...n].sort((a,s)=>new Date(`${a.sessionDate.split("T")[0]}T${a.startTime}`)-new Date(`${s.sessionDate.split("T")[0]}T${s.startTime}`)).reduce((a,s)=>{const b=D(s.sessionDate);return a[b]||(a[b]=[]),a[b].push(s),a},{}),i=Object.keys(u);return i.length>0&&c.value.length===0&&c.value.push(i[0]),u}),C=z(()=>{const n=d.value?.stats;return n?{"Total Sessions":n.totalSessions,Present:n.presentCount,Absent:n.absentCount,Percentage:n.attendancePercentage}:{}}),D=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"",B=n=>n?new Date(n).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!0}):"";return j(()=>{_.fetchTraineeAttendance(g.params.traineeId,g.params.id)}),(n,t)=>{const u=N("router-link");return o(),l("div",$,[e("nav",L,[e("ol",R,[e("li",G,[h(u,{to:"/admin/training/program",class:"text-sm font-medium text-slate-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-500 flex items-center transition-colors"},{default:f(()=>[...t[0]||(t[0]=[e("svg",{class:"w-4 h-4 me-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5"})],-1),p(" Trainings ",-1)])]),_:1})]),e("li",null,[e("div",E,[t[2]||(t[2]=e("svg",{class:"w-5 h-5 text-slate-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m9 5 7 7-7 7"})],-1)),h(u,{to:{name:"training.session",params:{id:x(g).params.id}},class:"ms-1 text-sm font-medium text-slate-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-500"},{default:f(()=>[...t[1]||(t[1]=[p(" Sessions ",-1)])]),_:1},8,["to"])])]),t[3]||(t[3]=e("li",{"aria-current":"page",class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-slate-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m9 5 7 7-7 7"})]),e("span",{class:"ms-1 text-sm font-medium text-slate-400 dark:text-zinc-500 tracking-tighter"},"Attendance Record")],-1))])]),x(d)?(o(),l("div",F,[e("div",O,[e("h1",Q,r(x(d).programName),1),e("div",q,[t[5]||(t[5]=e("div",{class:"h-2 w-2 rounded-full bg-blue-600 dark:bg-blue-500 animate-pulse"},null,-1)),e("p",H,[t[4]||(t[4]=p(" Trainee: ",-1)),e("span",J,r(x(d).traineeName?.full_name||"N/A"),1)])])]),x(d).stats?.isEligible?(o(),l("div",K,[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.64.304 1.24.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})],-1),e("span",{class:"text-[10px] font-black uppercase tracking-widest"},"Qualified",-1)])])):m("",!0)])):m("",!0),x(d)?.stats?(o(),l("div",U,[(o(!0),l(v,null,w(C.value,(i,a)=>(o(),l("div",{key:a,class:"bg-white dark:bg-zinc-900/50 border border-slate-200 dark:border-white/5 p-5 rounded-3xl shadow-sm dark:shadow-none relative group hover:ring-2 hover:ring-blue-500/20 transition-all"},[e("p",W,r(a),1),e("p",{class:k(["text-3xl font-bold mt-2",a==="Percentage"?i>=75?"text-blue-600 dark:text-blue-400":"text-rose-600 dark:text-rose-400":"text-slate-900 dark:text-white"])},r(i)+r(a==="Percentage"?"%":""),3)]))),128))])):m("",!0),e("div",X,[(o(!0),l(v,null,w(y.value,(i,a)=>(o(),l("div",{key:a,class:"border border-slate-200 dark:border-white/5 rounded-3xl bg-white dark:bg-zinc-900/40 shadow-sm overflow-hidden"},[e("button",{onClick:s=>T(a),class:"w-full flex items-center justify-between p-5 hover:bg-slate-50 dark:hover:bg-white/[0.03] transition-colors"},[e("div",Z,[e("div",ee,[t[7]||(t[7]=e("span",{class:"block text-[10px] font-black text-blue-600 dark:text-blue-500 uppercase tracking-widest mb-1 leading-none"},"Session Date",-1)),e("span",te,r(a),1)]),t[8]||(t[8]=e("div",{class:"h-8 w-px bg-slate-200 dark:bg-white/10 hidden sm:block"},null,-1)),e("div",se,[e("span",ne,r(i.length)+" Total ",1),e("span",ae,r(i.filter(s=>s.status==="Present").length)+" Present ",1)])]),(o(),l("svg",{class:k(["w-5 h-5 text-slate-400 transition-transform duration-500",{"rotate-180 text-blue-600":c.value.includes(a)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,Y),h(P,{name:"expand"},{default:f(()=>[c.value.includes(a)?(o(),l("div",re,[e("div",oe,[(o(!0),l(v,null,w(i,s=>(o(),l("div",{key:s.sessionId,class:"flex flex-col md:flex-row md:items-center justify-between p-4 rounded-2xl bg-white dark:bg-zinc-900/60 border border-slate-200 dark:border-white/5 group hover:border-blue-300 dark:hover:border-white/20 transition-all shadow-sm"},[e("div",le,[e("div",{class:k(["w-1.5 h-10 rounded-full",s.status==="Present"?"bg-emerald-500":"bg-rose-500"])},null,2),e("div",null,[e("h4",ie,r(s.sessionTopic),1),e("div",de,[e("span",null,"ID: "+r(s.sessionId.slice(-6)),1),t[11]||(t[11]=e("span",{class:"text-slate-300 dark:text-zinc-700"},"•",-1)),e("span",ce,[t[10]||(t[10]=e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),p(" "+r(s.startTime)+" - "+r(s.endTime),1)])])])]),e("div",xe,[e("div",ue,[t[12]||(t[12]=e("p",{class:"text-[9px] text-slate-400 dark:text-zinc-600 uppercase font-black tracking-widest"},"Status",-1)),e("span",{class:k(["text-xs font-bold uppercase",s.status==="Present"?"text-emerald-600 dark:text-emerald-500":"text-rose-600 dark:text-rose-500"])},r(s.status),3)]),e("div",pe,[t[13]||(t[13]=e("p",{class:"text-[9px] text-slate-400 dark:text-zinc-600 uppercase font-black tracking-widest"},"Check-In",-1)),e("p",me,r(s.signInTime?B(s.signInTime):"—"),1)])])]))),128))])])):m("",!0)]),_:2},1024)]))),128))])])}}},ve=V(ke,[["__scopeId","data-v-c0c7a990"]]);export{ve as default};
