import{u as E}from"./homeStore-EhJSugZD.js";import{c as r,a as e,o as a,s as I,m as L,b as p,u as h,t as u,k as U,F as x,r as v,p as f,h as G,n as _}from"./index-DBqKtzZ_.js";function R(b,c){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function W(b,c){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function q(b,c){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}const J={class:"bg-zinc-950 min-h-screen p-6 lg:px-20 lg:p-12 font-sans selection:bg-blue-500/30"},K={class:"p-4"},P={class:"flex rounded-full justify-between px-6 py-3 p-4 border-b border-white/[0.08] bg-zinc-900 backdrop-blur-xl sticky top-0 z-50"},Q={class:"flex justify-between gap-6"},X={class:"flex items-center gap-3"},Z={class:"w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-600/20"},tt={class:"flex items-center gap-2"},et={class:"flex items-center"},ot={class:"text-xl font-medium text-white ml-2 tabular-nums"},st={class:"p-4"},nt={class:"bg-zinc-900/30 border border-white/[0.08] rounded-xl overflow-hidden shadow-2xl relative"},rt={key:0,class:"absolute inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center"},at={class:"grid grid-cols-7 border-b border-white/[0.08] bg-white/[0.02]"},lt={class:"grid grid-cols-7 divide-x divide-white/[0.05]"},it={class:"flex justify-center pt-2 pb-1"},ct={class:"mt-1 flex flex-col gap-[2px]"},dt=["onClick"],ut={key:0,class:"truncate"},ht={key:1,class:"w-full h-[1px] bg-white/10"},wt={__name:"Calendar",setup(b){const c=E(),{trainings:m,loading:S}=I(c),z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=G(new Date),T=f(()=>l.value.toLocaleString("default",{month:"long"})),D=f(()=>l.value.getFullYear()),g=()=>{const o=l.value.getMonth()+1,t=l.value.getFullYear();c.fetchCalendar(o,t)},y=o=>{l.value=new Date(l.value.setMonth(l.value.getMonth()+o)),g()},j=()=>{l.value=new Date,g()},A=f(()=>{const o=D.value,t=l.value.getMonth(),s=new Date(o,t,1).getDay(),i=new Date(o,t,1-s),n=new Date(o,t+1,0),M=n.getDate(),V=6-n.getDay(),O=s+M+V,C=[],Y=new Date().toDateString();for(let w=0;w<O;w++){const d=new Date(i);d.setDate(i.getDate()+w),C.push({fullDate:d,dayNumber:d.getDate(),isCurrentMonth:d.getMonth()===t,isToday:d.toDateString()===Y})}return C}),B=o=>{if(!o||!m.value)return[];const t=new Date(o).setHours(0,0,0,0);return m.value.filter(s=>{const i=new Date(s.t_start_date).setHours(0,0,0,0),n=new Date(s.t_end_date).setHours(0,0,0,0);return t>=i&&t<=n})},k=(o,t)=>t&&new Date(o.t_start_date).toDateString()===t.toDateString(),F=(o,t)=>t&&new Date(o.t_end_date).toDateString()===t.toDateString(),N=o=>o&&o.getDay()===1,$=o=>{const t={Upcoming:{bar:"bg-rose-500/20 text-rose-300 border-rose-500/30"},Ongoing:{bar:"bg-blue-600 text-white shadow-[0_2px_10px_rgba(37,99,235,0.3)] z-10"},Completed:{bar:"bg-zinc-800 text-zinc-500 border-white/5"}};return t[o]||t.Upcoming},H=o=>console.log("Training Details:",o);return L(g),(o,t)=>(a(),r("div",J,[e("div",K,[e("header",P,[e("div",Q,[e("div",X,[e("div",Z,[p(h(R),{class:"w-5 h-5 text-white"})]),t[2]||(t[2]=e("h1",{class:"text-lg font-semibold text-white tracking-tight hidden sm:block"},"ATI Training Calendar",-1))]),e("div",tt,[e("button",{onClick:j,class:"px-4 py-1.5 text-xs font-bold text-zinc-300 hover:text-white border border-white/10 rounded-md hover:bg-white/5 transition-all"}," Today "),e("div",et,[e("button",{onClick:t[0]||(t[0]=s=>y(-1)),class:"p-2 hover:bg-white/5 rounded-full text-zinc-400 hover:text-white"},[p(h(W),{class:"w-5 h-5"})]),e("button",{onClick:t[1]||(t[1]=s=>y(1)),class:"p-2 hover:bg-white/5 rounded-full text-zinc-400 hover:text-white"},[p(h(q),{class:"w-5 h-5"})])]),e("span",ot,u(T.value)+" "+u(D.value),1)])])])]),e("main",st,[e("div",nt,[h(S)?(a(),r("div",rt,[...t[3]||(t[3]=[e("div",{class:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):U("",!0),e("div",at,[(a(),r(x,null,v(z,s=>e("div",{key:s,class:"py-2 text-center text-[10px] font-bold text-zinc-500 uppercase tracking-[0.2em]"},u(s),1)),64))]),e("div",lt,[(a(!0),r(x,null,v(A.value,(s,i)=>(a(),r("div",{key:i,class:_(["min-h-[145px] border-b border-white/[0.05] relative transition-colors",[s.isCurrentMonth?"bg-transparent":"bg-black/40 opacity-40"]])},[e("div",it,[e("span",{class:_(["text-xs font-semibold w-7 h-7 flex items-center justify-center rounded-full transition-all",s.isToday?"bg-blue-600 text-white shadow-lg shadow-blue-600/40":"text-zinc-500 hover:bg-white/5 cursor-pointer"])},u(s.dayNumber),3)]),e("div",ct,[(a(!0),r(x,null,v(B(s.fullDate),n=>(a(),r("div",{key:n._id,onClick:M=>H(n._id),class:"relative h-6 flex items-center cursor-pointer px-[2px]"},[e("div",{class:_(["h-[22px] w-full flex items-center px-2 text-[10px] font-bold tracking-tight transition-all",$(n.t_status).bar,k(n,s.fullDate)?"rounded-l-md ml-1 border-l border-y border-white/10":"border-y border-white/5",F(n,s.fullDate)?"rounded-r-md mr-1 border-r border-y border-white/10":"border-y border-white/5"])},[k(n,s.fullDate)||N(s.fullDate)?(a(),r("span",ut,u(n.t_name),1)):(a(),r("span",ht))],2)],8,dt))),128))])],2))),128))])])])]))}};export{wt as default};
