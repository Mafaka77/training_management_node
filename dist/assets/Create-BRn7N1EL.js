import{y as f,o as i,c as d,b as n,a as t,k as x,t as g,G as h,H as v,h as w,C as k}from"./index-Cg_xg-mB.js";import{u as y}from"./masterStore-BhR6-Yq9.js";import{B as c}from"./BaseInput-BIQK6e1Z.js";import{_ as V}from"./FilePicker-grQJtkN5.js";import{_}from"./Breadcrumbs-BYQ4kVbN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"max-w-5xl mx-auto pb-12"},D={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl p-6 shadow-sm"},C={class:"grid grid-cols-1 gap-6"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},M={class:"space-y-2"},S={class:"p-1 bg-zinc-50 dark:bg-white/[0.02] rounded-xl border-2 border-dashed border-zinc-200 dark:border-white/10"},U={class:"flex items-center justify-end gap-4 mt-8 pt-6 border-t border-zinc-100 dark:border-white/5"},P=["disabled"],j={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},O={__name:"Create",setup(F){const a=f(),u=y(),m=k(),l=w(!1),o=v({title:"",description:"",documents:[]}),p=[{label:"Documents",to:"/admin/master/documents"},{label:"Create Document"}],b=async()=>{if(!o.title||o.documents.length===0){a.warning("Please provide a title and at least one document.");return}l.value=!0;const s=new FormData;s.append("title",o.title),s.append("description",o.description),o.documents.forEach(e=>{s.append("documents",e)});try{const e=await u.submitDocument(s);e.success===!1?a.error(e.message):(a.success("Document(s) uploaded successfully!"),m.push({name:"master.documents.index"}),Object.assign(o,{title:"",description:"",documents:[]}))}catch(e){a.error("Upload failed. Please check your connection."),console.error(e)}finally{l.value=!1}};return(s,e)=>(i(),d("div",z,[n(_,{items:p}),t("form",{onSubmit:h(b,["prevent"])},[t("section",D,[e[7]||(e[7]=t("div",{class:"flex items-center gap-2 mb-6 text-amber-500"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),t("h2",{class:"text-lg font-bold tracking-tight"},"Document Repository")],-1)),t("div",C,[t("div",B,[n(c,{modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=r=>o.title=r),label:"Document Title",placeholder:"e.g. Training Manual 2024",type:"text"},null,8,["modelValue"]),n(c,{modelValue:o.description,"onUpdate:modelValue":e[1]||(e[1]=r=>o.description=r),label:"Short Description",placeholder:"Brief overview of the document content",type:"text"},null,8,["modelValue"])]),t("div",M,[e[4]||(e[4]=t("label",{class:"block text-sm font-bold text-zinc-700 dark:text-zinc-300"}," Upload Files ",-1)),t("div",S,[n(V,{modelValue:o.documents,"onUpdate:modelValue":e[2]||(e[2]=r=>o.documents=r)},null,8,["modelValue"])]),e[5]||(e[5]=t("p",{class:"text-[11px] text-zinc-500 italic px-1"}," Supported formats: PDF, DOCX, PPTX (Max 10MB per file) ",-1))])]),t("div",U,[t("button",{type:"button",onClick:e[3]||(e[3]=r=>s.$router.back()),class:"px-6 py-2.5 rounded-xl text-zinc-500 hover:bg-zinc-100 dark:hover:bg-white/5 font-semibold transition-all"}," Cancel "),t("button",{type:"submit",disabled:l.value,class:"flex items-center justify-center px-8 py-2.5 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-lg shadow-blue-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed min-w-[160px]"},[l.value?(i(),d("svg",j,[...e[6]||(e[6]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),t("span",null,g(l.value?"Uploading...":"Save Document"),1)],8,P)])])],32)]))}};export{O as default};
