import{o as i,c as r,a as e,t as a,s as S,y as D,m as P,b as d,u as o,n as B,j as N,k as _,g as R,D as V,h as v,C as E}from"./index-Cg_xg-mB.js";import{_ as H}from"./Breadcrumbs-BYQ4kVbN.js";import{u as T}from"./enrollmentStore-DDQyyr7D.js";import{_ as w}from"./Dialog-KPZEHyEa.js";const I={class:"group flex items-start gap-3 p-3 rounded-xl transition-all duration-300 hover:bg-zinc-100 dark:hover:bg-white/[0.04]"},L={class:"mt-0.5 h-8 w-8 rounded-lg bg-zinc-100 dark:bg-white/5 flex items-center justify-center text-zinc-400 group-hover:text-blue-500 group-hover:scale-110 transition-all duration-300 flex-shrink-0"},U={xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},q={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},O={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-1.947 3.42 3.42 0 014.438 0c.83.83 1.947 1.247 1.946 1.947a3.42 3.42 0 010 4.438c-.83.83-1.247 1.947-1.946 1.946a3.42 3.42 0 01-4.438 0 3.42 3.42 0 01-1.946-1.946 3.42 3.42 0 010-4.438z"},F={key:2,"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"},G={key:3,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"},J={key:4,"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},K={class:"flex flex-col"},Q={class:"text-[10px] font-black uppercase tracking-[0.15em] text-zinc-400 group-hover:text-zinc-500 transition-colors"},W={class:"text-sm font-bold text-zinc-800 dark:text-zinc-200 break-all leading-tight mt-0.5"},m={__name:"DetailItem",props:{label:String,value:[String,Number],icon:String},setup(l){return(u,s)=>(i(),r("div",I,[e("div",L,[(i(),r("svg",U,[l.icon==="OfficeBuilding"?(i(),r("path",q)):l.icon==="BadgeCheck"?(i(),r("path",O)):l.icon==="Identification"?(i(),r("path",F)):l.icon==="Phone"?(i(),r("path",G)):(i(),r("path",J))]))]),e("div",K,[e("span",Q,a(l.label),1),e("span",W,a(l.value||"---"),1)])]))}},X={class:"max-w-6xl mx-auto pb-12"},Y={key:0,class:"flex flex-col items-center justify-center py-24 gap-4"},Z={key:1,class:"space-y-6"},ee={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm"},te={class:"p-8 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.01]"},se={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6"},oe={class:"flex items-center gap-5"},ne={class:"h-20 w-20 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-blue-500/20"},ie={class:"flex items-center gap-3"},re={class:"text-2xl font-black text-zinc-900 dark:text-zinc-100 uppercase tracking-tight italic"},ae={class:"text-zinc-500 font-medium"},le={class:"grid grid-cols-1 lg:grid-cols-3 divide-y lg:divide-y-0 lg:divide-x divide-zinc-100 dark:divide-white/5"},de={class:"p-8 space-y-6"},ce={class:"grid grid-cols-1 gap-4"},ue={class:"p-8 space-y-6 bg-zinc-50/30 dark:bg-white/[0.01]"},pe={class:"space-y-4"},me={class:"text-sm font-black text-zinc-800 dark:text-zinc-200 mt-1"},ge={class:"grid grid-cols-2 gap-4"},xe={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},he={class:"grid grid-cols-2 gap-4"},ve={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},fe={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},be={class:"p-8 space-y-6"},ke={key:0,class:"space-y-3"},_e={key:1,class:"p-6 rounded-2xl border-2 border-dashed border-zinc-100 dark:border-white/5 flex flex-col items-center text-center"},je={__name:"View",setup(l){const u=T(),{enrollment:s,isLoading:z}=S(u),c=D(),y=V(),f=E(),g=v(!1),b=v(!1),x=v(!1),A=[{label:"Enrollments",to:"/admin/training/enrollments"},{label:"Application Detail"}],j=()=>{g.value=!0},$=()=>{x.value=!0},k=async n=>{try{const t=await u.updateEnrollmentStatus(s.value._id,n);t.success?(f.push("/admin/training/enrollments"),c.success(`Application ${n} successfully`)):c.error(t.message)}catch(t){c.error(t)}},C=async()=>{if(confirm("Are you sure you want to reset this application to Pending?"))try{const n=await u.updateEnrollmentStatus(s.value._id,"Pending");n.success?(f.push("/admin/training/enrollments"),c.success("Application marked Pending ")):c.error(n.message)}catch(n){c.error(n)}},M=n=>n==="Approved"?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":n==="Pending"?"bg-amber-500/10 text-amber-500 border-amber-500/20":n==="Rejected"?"bg-rose-500/10 text-rose-500 border-rose-500/20":"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",h=n=>n?new Date(n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A";return P(()=>{u.fetchEnrollmentById(y.params.id)}),(n,t)=>(i(),r("div",X,[d(H,{items:A}),o(z)?(i(),r("div",Y,[...t[6]||(t[6]=[e("div",{class:"relative h-12 w-12"},[e("div",{class:"absolute inset-0 rounded-full border-4 border-blue-500/20"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin"})],-1),e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 animate-pulse"},"Fetching Application...",-1)])])):o(s)?(i(),r("div",Z,[e("section",ee,[e("div",te,[e("div",se,[e("div",oe,[e("div",ne,a(o(s).user?.full_name?.charAt(0)),1),e("div",null,[e("div",ie,[e("h2",re,a(o(s).user?.full_name),1),e("span",{class:B([M(o(s).status),"px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border"])},a(o(s).status),3)]),e("p",ae,a(o(s).user?.email),1)])]),o(s).status!=="Pending"?(i(),r("button",{key:0,onClick:C,class:"text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-blue-500 flex items-center gap-2 transition-colors"},[...t[7]||(t[7]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),N(" Reset to Pending ",-1)])])):_("",!0)])]),e("div",le,[e("div",de,[t[8]||(t[8]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-blue-500"},"Trainee Profile",-1)),e("div",ce,[d(m,{label:"Department",value:o(s).user?.department||"N/A",icon:"OfficeBuilding"},null,8,["value"]),d(m,{label:"Designation",value:o(s).user?.designation||"N/A",icon:"BadgeCheck"},null,8,["value"]),d(m,{label:"Mobile",value:o(s).user?.mobile,icon:"Phone"},null,8,["value"]),d(m,{label:"Group",value:o(s).user?.group?.group_name,icon:""},null,8,["value"])])]),e("div",ue,[t[14]||(t[14]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-500"},"Program Details",-1)),e("div",pe,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Course Title",-1)),e("p",me,a(o(s).training_program?.t_name),1)]),e("div",ge,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Applied Date",-1)),e("p",xe,a(h(o(s).enrolledAt)),1)]),t[11]||(t[11]=e("div",null,[e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Schedule"),e("p",{class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},"Upcoming")],-1))]),e("div",he,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Start Date",-1)),e("p",ve,a(h(o(s).training_program?.t_start_date)),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"End Date",-1)),e("p",fe,a(h(o(s).training_program?.t_end_date)),1)])])])]),e("div",be,[t[16]||(t[16]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-rose-500"},"Admin Action",-1)),o(s).status==="Pending"?(i(),r("div",ke,[e("button",{onClick:t[0]||(t[0]=p=>j(o(s))),class:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-emerald-600/20 active:scale-[0.98]"}," Approve Application "),e("button",{onClick:t[1]||(t[1]=p=>$(o(s))),class:"w-full bg-rose-600 hover:bg-rose-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-rose-600/20 active:scale-[0.98]"}," Reject Application ")])):(i(),r("div",_e,[...t[15]||(t[15]=[R('<div class="h-10 w-10 rounded-full bg-zinc-100 dark:bg-white/5 flex items-center justify-center mb-3"><svg class="w-5 h-5 text-zinc-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><p class="text-xs font-bold text-zinc-500">Status is currently locked.</p><p class="text-[10px] text-zinc-400 mt-1">Reset to Pending to modify again.</p>',3)])]))])])])])):_("",!0),d(w,{show:g.value,loading:b.value,title:"Confirm Approval",message:"Are you sure you want to approve this request?","confirm-text":"Approve Now",onClose:t[2]||(t[2]=p=>g.value=!1),onConfirm:t[3]||(t[3]=p=>{k("Approved")})},null,8,["show","loading"]),d(w,{show:x.value,loading:b.value,title:"Confirm Rejection",message:"Are you sure you want to reject this request?","confirm-text":"Reject Now",onClose:t[4]||(t[4]=p=>x.value=!1),onConfirm:t[5]||(t[5]=p=>k("Rejected"))},null,8,["show","loading"])]))}};export{je as default};
