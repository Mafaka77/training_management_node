import{m as S,Q as z,o as s,c as n,t as v,k as c,a as e,z as x,A as B,I as O,M as j,F as I,r as R,n as k,p as w,h as g,R as U}from"./index-DBqKtzZ_.js";const $={key:0,class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white ml-1"},A={class:"flex items-center gap-2 overflow-hidden"},E=["src"],D={class:"flex-1 min-w-0 relative"},N=["placeholder"],q={key:0,class:"absolute inset-0 pointer-events-none flex items-center truncate"},F={class:"absolute inset-y-0 right-0 flex items-center pr-2 gap-1"},T={class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm dark:bg-gray-800"},G={key:0,class:"p-3 text-center text-sm text-gray-500"},Q=["onClick"],H={class:"flex items-center gap-3"},J=["src"],K={class:"flex flex-col"},P={class:"text-[10px] opacity-70"},W={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4 text-blue-600 dark:text-blue-400"},Z={__name:"SearchSelect",props:{modelValue:[String,Object],options:{type:Array,required:!0},optionLabel:{type:String,default:"full_name"},label:String,placeholder:{type:String,default:"Select an option"}},emits:["update:modelValue"],setup(r,{emit:_}){const i=r,p=_,u=g(!1),d=g(""),m=g(null),f=g(null),a=w(()=>i.modelValue?typeof i.modelValue=="object"?i.modelValue:i.options.find(l=>l._id===i.modelValue):null),L="https://staging2.egovmz.in",b=(l,t)=>l?`${L}${l}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}`,h=w(()=>{const l=d.value.toLowerCase().trim();return l?i.options.filter(t=>t[i.optionLabel]?.toLowerCase().includes(l)||t.department?.toLowerCase().includes(l)||t.designation?.toLowerCase().includes(l)):i.options}),C=()=>{u.value=!u.value,u.value&&U(()=>f.value?.focus())},V=l=>{p("update:modelValue",l._id),d.value="",u.value=!1},M=()=>{p("update:modelValue",null),d.value="",u.value=!1},y=l=>{m.value&&!m.value.contains(l.target)&&(u.value=!1,d.value="")};return S(()=>document.addEventListener("click",y)),z(()=>document.removeEventListener("click",y)),(l,t)=>(s(),n("div",{class:"relative w-full",ref_key:"container",ref:m},[r.label?(s(),n("label",$,v(r.label),1)):c("",!0),e("div",{onClick:C,class:"relative w-full cursor-default rounded-lg border py-2 pl-3 pr-10 text-left text-sm transition-all bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500"},[e("div",A,[a.value?(s(),n("img",{key:0,src:b(a.value.image,a.value[r.optionLabel]),class:"w-5 h-5 rounded-full object-cover"},null,8,E)):c("",!0),e("div",D,[x(e("input",{ref_key:"inputRef",ref:f,"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),type:"text",class:"w-full bg-transparent border-none outline-none p-0 text-sm text-gray-900 dark:text-white focus:ring-0 placeholder-gray-500",placeholder:a.value?"":r.placeholder,onInput:t[1]||(t[1]=o=>u.value=!0)},null,40,N),[[B,d.value]]),a.value&&!d.value?(s(),n("span",q,v(a.value[r.optionLabel]),1)):c("",!0)])]),e("span",F,[a.value?(s(),n("button",{key:0,type:"button",onClick:O(M,["stop"]),class:"p-0.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-400 transition-colors"},[...t[2]||(t[2]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):c("",!0),t[3]||(t[3]=e("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])]),x(e("div",T,[h.value.length===0?(s(),n("div",G," No results found ")):c("",!0),(s(!0),n(I,null,R(h.value,o=>(s(),n("div",{key:o._id,onClick:X=>V(o),class:k(["relative cursor-pointer select-none py-2.5 pl-3 pr-9 text-gray-900 dark:text-gray-200 hover:bg-blue-600 hover:text-white",{"bg-blue-50 dark:bg-gray-700":a.value&&a.value._id===o._id}])},[e("div",H,[e("img",{src:b(o.image,o[r.optionLabel]),class:"w-6 h-6 rounded-full object-cover"},null,8,J),e("div",K,[e("span",{class:k(["block truncate",{"font-semibold":a.value&&a.value._id===o._id}])},v(o[r.optionLabel]),3),e("span",P,v(o.designation),1)])]),a.value&&a.value._id===o._id?(s(),n("span",W,[...t[4]||(t[4]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):c("",!0)],10,Q))),128))],512),[[j,u.value]])],512))}};export{Z as _};
