import{s as P,y as D,m as R,o as l,c as d,b as i,u as o,a as e,t as n,n as N,j as $,k as w,g as B,G as E,h as v,C as M}from"./index-BOgTUK57.js";import{_ as V}from"./Breadcrumbs-DoME-ykm.js";import{_ as u}from"./DetailItem-BedLo3Ki.js";import{u as T}from"./enrollmentStore-BiJPC1hY.js";import{_}from"./Dialog-BWBG-uzq.js";const H={class:"max-w-6xl mx-auto pb-12"},I={key:0,class:"flex flex-col items-center justify-center py-24 gap-4"},U={key:1,class:"space-y-6"},q={class:"bg-white dark:bg-zinc-900/50 border border-zinc-200 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm"},G={class:"p-8 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.01]"},L={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6"},F={class:"flex items-center gap-5"},O={class:"h-20 w-20 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-blue-500/20"},J={class:"flex items-center gap-3"},K={class:"text-2xl font-black text-zinc-900 dark:text-zinc-100 uppercase tracking-tight italic"},Q={class:"text-zinc-500 font-medium"},W={class:"grid grid-cols-1 lg:grid-cols-3 divide-y lg:divide-y-0 lg:divide-x divide-zinc-100 dark:divide-white/5"},X={class:"p-8 space-y-6"},Y={class:"grid grid-cols-1 gap-4"},Z={class:"p-8 space-y-6 bg-zinc-50/30 dark:bg-white/[0.01]"},ee={class:"space-y-4"},te={class:"text-sm font-black text-zinc-800 dark:text-zinc-200 mt-1"},se={class:"grid grid-cols-2 gap-4"},oe={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},re={class:"grid grid-cols-2 gap-4"},ne={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},ie={class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},ae={class:"p-8 space-y-6"},le={key:0,class:"space-y-3"},de={key:1,class:"p-6 rounded-2xl border-2 border-dashed border-zinc-100 dark:border-white/5 flex flex-col items-center text-center"},fe={__name:"Enrollment",setup(ce){const p=T(),{enrollment:s,isLoading:y}=P(p),a=D(),m=E(),b=M(),g=v(!1),h=v(!1),x=v(!1),z=[{label:"Enrollments",to:{name:"trainer.programs"}},{label:"Application Detail"}],A=()=>{g.value=!0},C=()=>{x.value=!0},k=async r=>{try{const t=await p.updateEnrollmentStatus(s.value._id,r);t.success?(b.push({name:"trainer.programs.edit",params:{id:m.params.programId}}),a.success(`Application ${r} successfully`)):a.error(t.message)}catch(t){a.error(t)}},j=async()=>{if(confirm("Are you sure you want to reset this application to Pending?"))try{const r=await p.updateEnrollmentStatus(s.value._id,"Pending");r.success?(b.push({name:"trainer.programs.edit",params:{id:m.params.programId}}),a.success("Application marked Pending ")):a.error(r.message)}catch(r){a.error(r)}},S=r=>r==="Approved"?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":r==="Pending"?"bg-amber-500/10 text-amber-500 border-amber-500/20":r==="Rejected"?"bg-rose-500/10 text-rose-500 border-rose-500/20":"bg-zinc-500/10 text-zinc-500 border-zinc-500/20",f=r=>r?new Date(r).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A";return R(()=>{p.fetchEnrollmentById(m.params.id)}),(r,t)=>(l(),d("div",H,[i(V,{items:z}),o(y)?(l(),d("div",I,[...t[6]||(t[6]=[e("div",{class:"relative h-12 w-12"},[e("div",{class:"absolute inset-0 rounded-full border-4 border-blue-500/20"}),e("div",{class:"absolute inset-0 rounded-full border-4 border-t-blue-500 animate-spin"})],-1),e("p",{class:"text-xs font-black uppercase tracking-widest text-zinc-500 animate-pulse"},"Fetching Application...",-1)])])):o(s)?(l(),d("div",U,[e("section",q,[e("div",G,[e("div",L,[e("div",F,[e("div",O,n(o(s).user?.full_name?.charAt(0)),1),e("div",null,[e("div",J,[e("h2",K,n(o(s).user?.full_name),1),e("span",{class:N([S(o(s).status),"px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border"])},n(o(s).status),3)]),e("p",Q,n(o(s).user?.email),1)])]),o(s).status!=="Pending"?(l(),d("button",{key:0,onClick:j,class:"text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-blue-500 flex items-center gap-2 transition-colors"},[...t[7]||(t[7]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),$(" Reset to Pending ",-1)])])):w("",!0)])]),e("div",W,[e("div",X,[t[8]||(t[8]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-blue-500"},"Trainee Profile",-1)),e("div",Y,[i(u,{label:"Department",value:o(s).user?.department||"N/A",icon:"OfficeBuilding"},null,8,["value"]),i(u,{label:"Designation",value:o(s).user?.designation||"N/A",icon:"BadgeCheck"},null,8,["value"]),i(u,{label:"Mobile",value:o(s).user?.mobile,icon:"Phone"},null,8,["value"]),i(u,{label:"Group",value:o(s).user?.group?.group_name,icon:""},null,8,["value"])])]),e("div",Z,[t[14]||(t[14]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-emerald-500"},"Program Details",-1)),e("div",ee,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Course Title",-1)),e("p",te,n(o(s).training_program?.t_name),1)]),e("div",se,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Applied Date",-1)),e("p",oe,n(f(o(s).enrolledAt)),1)]),t[11]||(t[11]=e("div",null,[e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Schedule"),e("p",{class:"text-xs font-medium text-zinc-600 dark:text-zinc-400 mt-1"},"Upcoming")],-1))]),e("div",re,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"Start Date",-1)),e("p",ne,n(f(o(s).training_program?.t_start_date)),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-[11px] font-bold text-zinc-400 uppercase tracking-tighter"},"End Date",-1)),e("p",ie,n(f(o(s).training_program?.t_end_date)),1)])])])]),e("div",ae,[t[16]||(t[16]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-rose-500"},"Admin Action",-1)),o(s).status==="Pending"?(l(),d("div",le,[e("button",{onClick:t[0]||(t[0]=c=>A(o(s))),class:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-emerald-600/20 active:scale-[0.98]"}," Approve Application "),e("button",{onClick:t[1]||(t[1]=c=>C(o(s))),class:"w-full bg-rose-600 hover:bg-rose-700 text-white font-black py-3 rounded-xl transition-all shadow-lg shadow-rose-600/20 active:scale-[0.98]"}," Reject Application ")])):(l(),d("div",de,[...t[15]||(t[15]=[B('<div class="h-10 w-10 rounded-full bg-zinc-100 dark:bg-white/5 flex items-center justify-center mb-3"><svg class="w-5 h-5 text-zinc-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><p class="text-xs font-bold text-zinc-500">Status is currently locked.</p><p class="text-[10px] text-zinc-400 mt-1">Reset to Pending to modify again.</p>',3)])]))])])])])):w("",!0),i(_,{show:g.value,loading:h.value,title:"Confirm Approval",message:"Are you sure you want to approve this request?","confirm-text":"Approve Now",onClose:t[2]||(t[2]=c=>g.value=!1),onConfirm:t[3]||(t[3]=c=>{k("Approved")})},null,8,["show","loading"]),i(_,{show:x.value,loading:h.value,title:"Confirm Rejection",message:"Are you sure you want to reject this request?","confirm-text":"Reject Now",onClose:t[4]||(t[4]=c=>x.value=!1),onConfirm:t[5]||(t[5]=c=>k("Rejected"))},null,8,["show","loading"])]))}};export{fe as default};
