import{s as f,y as v,m as z,o as a,c as n,a as e,b as h,w as C,u as r,t as i,F as u,r as b,n as m,e as g,j as T,D as A,i as P}from"./index-BV9NVDf5.js";import{u as I}from"./trainerStore-dWNGz9i-.js";import{d as B}from"./dayjs.min-G8h-aa4f.js";import{C as L,L as M}from"./loader-circle-C0f6iDlY.js";import{C as S}from"./circle-check-big-slnr1yYP.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./createLucideIcon-Cv-cGjnV.js";const D={class:"space-y-6"},N={class:"flex items-center justify-between"},j={class:"flex items-center gap-4"},F={key:0,class:"h-7 w-48 bg-zinc-200 dark:bg-white/10 animate-pulse rounded-lg"},V={key:1,class:"text-xl font-bold dark:text-white"},E=["disabled"],R={class:"bg-white dark:bg-zinc-900/40 border border-zinc-200 dark:border-white/5 rounded-[2rem] overflow-hidden"},$={class:"w-full text-left border-collapse"},q={class:"divide-y divide-zinc-200 dark:divide-white/5"},G={class:"px-8 py-4"},H={class:"flex items-center gap-3"},J={class:"text-sm font-medium dark:text-zinc-200"},K={class:"text-[10px] text-zinc-500"},O={class:"px-8 py-4 text-center"},Q={key:0,class:"font-mono text-[11px] text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10 px-2 py-1 rounded-md"},U={key:1,class:"text-[10px] text-zinc-400 font-medium"},W={class:"px-8 py-4 text-center"},X={class:"px-8 py-4 text-right"},Y=["onClick","disabled"],de={__name:"Attendance",setup(Z){const c=I(),{trainees:k,sessionTopic:_,isAttendanceLoading:p}=f(c),l=A();l.params.id;const x=v(),w=o=>o?B(o).format("hh:mm A"):"--:--",y=async o=>{o.isProcessing=!0;try{const t=new FormData;t.append("sessionId",l.params.id),t.append("userId",o._id),t.append("enrollmentId",o.enrollmentId),t.append("status","Present");const d=await c.markAttendance(t);d.success?(await c.fetchTrainees(l.params.id),x.success(d.message)):x.error(d.message)}catch(t){x.error(t)}finally{o.isProcessing=!1}};return z(()=>{c.fetchTrainees(l.params.id)}),(o,t)=>{const d=P("router-link");return a(),n("div",D,[e("div",N,[e("div",j,[h(d,{to:"/trainer/trainings",class:"p-2 rounded-xl bg-zinc-100 dark:bg-white/5 text-zinc-500 hover:text-blue-500 transition-colors"},{default:C(()=>[h(r(L),{class:"w-5 h-5"})]),_:1}),e("div",null,[r(p)?(a(),n("div",F)):(a(),n("h1",V,i(r(_)),1)),t[0]||(t[0]=e("p",{class:"text-xs text-zinc-500 uppercase tracking-widest font-black"},"Mark Attendance",-1))])]),e("button",{disabled:r(p),class:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-xs font-bold shadow-lg shadow-blue-500/20 transition-all active:scale-95 disabled:opacity-50"}," Export ",8,E)]),e("div",R,[e("table",$,[t[2]||(t[2]=e("thead",null,[e("tr",{class:"border-b border-zinc-200 dark:border-white/5 text-[10px] uppercase tracking-widest text-zinc-400 font-black"},[e("th",{class:"px-8 py-4"},"Trainee Name"),e("th",{class:"px-8 py-4 text-center"},"Sign-in Time"),e("th",{class:"px-8 py-4 text-center"},"Status"),e("th",{class:"px-8 py-4 text-right"},"Actions")])],-1)),e("tbody",q,[r(p)?(a(),n(u,{key:0},b(5,s=>e("tr",{key:s,class:"animate-pulse"},[...t[1]||(t[1]=[e("td",{class:"px-8 py-5"},[e("div",{class:"space-y-2"},[e("div",{class:"h-4 w-32 bg-zinc-200 dark:bg-white/10 rounded"}),e("div",{class:"h-3 w-40 bg-zinc-100 dark:bg-white/5 rounded"})])],-1),e("td",{class:"px-8 py-5"},[e("div",{class:"mx-auto h-5 w-16 bg-zinc-100 dark:bg-white/5 rounded-md"})],-1),e("td",{class:"px-8 py-5"},[e("div",{class:"mx-auto h-5 w-20 bg-zinc-100 dark:bg-white/5 rounded-full"})],-1),e("td",{class:"px-8 py-5 text-right"},[e("div",{class:"ml-auto h-9 w-32 bg-zinc-200 dark:bg-white/10 rounded-xl"})],-1)])])),64)):(a(!0),n(u,{key:1},b(r(k),s=>(a(),n("tr",{key:s._id,class:"group hover:bg-zinc-50 dark:hover:bg-white/[0.02] transition-colors"},[e("td",G,[e("div",H,[e("div",null,[e("p",J,i(s.name),1),e("p",K,i(s.email),1)])])]),e("td",O,[s.signInTime?(a(),n("span",Q,i(w(s.signInTime)),1)):(a(),n("span",U,"--:--"))]),e("td",W,[e("span",{class:m([s.status==="Present"?"text-emerald-500 bg-emerald-500/10":"text-zinc-400 bg-zinc-400/10","px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-tighter transition-colors"])},i(s.status),3)]),e("td",X,[e("button",{onClick:ee=>y(s),disabled:s.isProcessing,class:m(["inline-flex items-center gap-2 px-4 py-2 rounded-xl text-[11px] font-bold transition-all active:scale-95 disabled:opacity-50",s.status==="Present"?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-zinc-100 dark:bg-white/5 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-white/10 border border-transparent"])},[s.isProcessing?(a(),g(r(M),{key:0,class:"w-3.5 h-3.5 animate-spin"})):(a(),g(r(S),{key:1,class:"w-3.5 h-3.5"})),T(" "+i(s.status==="Present"?"Marked":"Mark Attendance"),1)],10,Y)])]))),128))])])])])}}};export{de as default};
